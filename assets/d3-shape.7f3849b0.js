import{p as sn}from"./d3-path.cb64bdd6.js";function m(e){return function(){return e}}const rn=Math.abs,M=Math.atan2,O=Math.cos,fn=Math.max,en=Math.min,k=Math.sin,C=Math.sqrt,w=1e-12,F=Math.PI,W=F/2,U=2*F;function cn(e){return e>1?0:e<-1?F:Math.acos(e)}function on(e){return e>=1?W:e<=-1?-W:Math.asin(e)}function gn(e){return e.innerRadius}function hn(e){return e.outerRadius}function pn(e){return e.startAngle}function mn(e){return e.endAngle}function yn(e){return e&&e.padAngle}function dn(e,o,v,y,g,c,l,n){var u=v-e,t=y-o,h=l-g,s=n-c,i=s*u-h*t;if(!(i*i<w))return i=(h*(o-c)-s*(e-g))/i,[e+i*u,o+i*t]}function Q(e,o,v,y,g,c,l){var n=e-v,u=o-y,t=(l?c:-c)/C(n*n+u*u),h=t*u,s=-t*n,i=e+h,d=o+s,p=v+h,P=y+s,f=(i+p)/2,E=(d+P)/2,R=p-i,x=P-d,A=R*R+x*x,N=g-c,T=i*P-p*d,I=(x<0?-1:1)*C(fn(0,N*N*A-T*T)),L=(T*x-R*I)/A,S=(-T*R-x*I)/A,b=(T*x+R*I)/A,j=(-T*R+x*I)/A,r=L-f,a=S-E,V=b-f,D=j-E;return r*r+a*a>V*V+D*D&&(L=b,S=j),{cx:L,cy:S,x01:-h,y01:-s,x11:L*(g/N-1),y11:S*(g/N-1)}}function wn(){var e=gn,o=hn,v=m(0),y=null,g=pn,c=mn,l=yn,n=null;function u(){var t,h,s=+e.apply(this,arguments),i=+o.apply(this,arguments),d=g.apply(this,arguments)-W,p=c.apply(this,arguments)-W,P=rn(p-d),f=p>d;if(n||(n=t=sn()),i<s&&(h=i,i=s,s=h),!(i>w))n.moveTo(0,0);else if(P>U-w)n.moveTo(i*O(d),i*k(d)),n.arc(0,0,i,d,p,!f),s>w&&(n.moveTo(s*O(p),s*k(p)),n.arc(0,0,s,p,d,f));else{var E=d,R=p,x=d,A=p,N=P,T=P,I=l.apply(this,arguments)/2,L=I>w&&(y?+y.apply(this,arguments):C(s*s+i*i)),S=en(rn(i-s)/2,+v.apply(this,arguments)),b=S,j=S,r,a;if(L>w){var V=on(L/s*k(I)),D=on(L/i*k(I));(N-=V*2)>w?(V*=f?1:-1,x+=V,A-=V):(N=0,x=A=(d+p)/2),(T-=D*2)>w?(D*=f?1:-1,E+=D,R-=D):(T=0,E=R=(d+p)/2)}var z=i*O(E),B=i*k(E),G=s*O(A),H=s*k(A);if(S>w){var J=i*O(R),K=i*k(R),X=s*O(x),Y=s*k(x),q;if(P<F&&(q=dn(z,B,X,Y,J,K,G,H))){var Z=z-q[0],_=B-q[1],$=J-q[0],nn=K-q[1],tn=1/k(cn((Z*$+_*nn)/(C(Z*Z+_*_)*C($*$+nn*nn)))/2),un=C(q[0]*q[0]+q[1]*q[1]);b=en(S,(s-un)/(tn-1)),j=en(S,(i-un)/(tn+1))}}T>w?j>w?(r=Q(X,Y,z,B,i,j,f),a=Q(J,K,G,H,i,j,f),n.moveTo(r.cx+r.x01,r.cy+r.y01),j<S?n.arc(r.cx,r.cy,j,M(r.y01,r.x01),M(a.y01,a.x01),!f):(n.arc(r.cx,r.cy,j,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,i,M(r.cy+r.y11,r.cx+r.x11),M(a.cy+a.y11,a.cx+a.x11),!f),n.arc(a.cx,a.cy,j,M(a.y11,a.x11),M(a.y01,a.x01),!f))):(n.moveTo(z,B),n.arc(0,0,i,E,R,!f)):n.moveTo(z,B),!(s>w)||!(N>w)?n.lineTo(G,H):b>w?(r=Q(G,H,J,K,s,-b,f),a=Q(z,B,X,Y,s,-b,f),n.lineTo(r.cx+r.x01,r.cy+r.y01),b<S?n.arc(r.cx,r.cy,b,M(r.y01,r.x01),M(a.y01,a.x01),!f):(n.arc(r.cx,r.cy,b,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,s,M(r.cy+r.y11,r.cx+r.x11),M(a.cy+a.y11,a.cx+a.x11),f),n.arc(a.cx,a.cy,b,M(a.y11,a.x11),M(a.y01,a.x01),!f))):n.arc(0,0,s,A,x,f)}if(n.closePath(),t)return n=null,t+""||null}return u.centroid=function(){var t=(+e.apply(this,arguments)+ +o.apply(this,arguments))/2,h=(+g.apply(this,arguments)+ +c.apply(this,arguments))/2-F/2;return[O(h)*t,k(h)*t]},u.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:m(+t),u):e},u.outerRadius=function(t){return arguments.length?(o=typeof t=="function"?t:m(+t),u):o},u.cornerRadius=function(t){return arguments.length?(v=typeof t=="function"?t:m(+t),u):v},u.padRadius=function(t){return arguments.length?(y=t==null?null:typeof t=="function"?t:m(+t),u):y},u.startAngle=function(t){return arguments.length?(g=typeof t=="function"?t:m(+t),u):g},u.endAngle=function(t){return arguments.length?(c=typeof t=="function"?t:m(+t),u):c},u.padAngle=function(t){return arguments.length?(l=typeof t=="function"?t:m(+t),u):l},u.context=function(t){return arguments.length?(n=t==null?null:t,u):n},u}function ln(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function an(e){this._context=e}an.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;default:this._context.lineTo(e,o);break}}};function vn(e){return new an(e)}function An(e){return e[0]}function xn(e){return e[1]}function Pn(e,o){var v=m(!0),y=null,g=vn,c=null;e=typeof e=="function"?e:e===void 0?An:m(e),o=typeof o=="function"?o:o===void 0?xn:m(o);function l(n){var u,t=(n=ln(n)).length,h,s=!1,i;for(y==null&&(c=g(i=sn())),u=0;u<=t;++u)!(u<t&&v(h=n[u],u,n))===s&&((s=!s)?c.lineStart():c.lineEnd()),s&&c.point(+e(h,u,n),+o(h,u,n));if(i)return c=null,i+""||null}return l.x=function(n){return arguments.length?(e=typeof n=="function"?n:m(+n),l):e},l.y=function(n){return arguments.length?(o=typeof n=="function"?n:m(+n),l):o},l.defined=function(n){return arguments.length?(v=typeof n=="function"?n:m(!!n),l):v},l.curve=function(n){return arguments.length?(g=n,y!=null&&(c=g(y)),l):g},l.context=function(n){return arguments.length?(n==null?y=c=null:c=g(y=n),l):y},l}function Mn(e,o){return o<e?-1:o>e?1:o>=e?0:NaN}function Rn(e){return e}function En(){var e=Rn,o=Mn,v=null,y=m(0),g=m(U),c=m(0);function l(n){var u,t=(n=ln(n)).length,h,s,i=0,d=new Array(t),p=new Array(t),P=+y.apply(this,arguments),f=Math.min(U,Math.max(-U,g.apply(this,arguments)-P)),E,R=Math.min(Math.abs(f)/t,c.apply(this,arguments)),x=R*(f<0?-1:1),A;for(u=0;u<t;++u)(A=p[d[u]=u]=+e(n[u],u,n))>0&&(i+=A);for(o!=null?d.sort(function(N,T){return o(p[N],p[T])}):v!=null&&d.sort(function(N,T){return v(n[N],n[T])}),u=0,s=i?(f-t*x)/i:0;u<t;++u,P=E)h=d[u],A=p[h],E=P+(A>0?A*s:0)+x,p[h]={data:n[h],index:u,value:A,startAngle:P,endAngle:E,padAngle:R};return p}return l.value=function(n){return arguments.length?(e=typeof n=="function"?n:m(+n),l):e},l.sortValues=function(n){return arguments.length?(o=n,v=null,l):o},l.sort=function(n){return arguments.length?(v=n,o=null,l):v},l.startAngle=function(n){return arguments.length?(y=typeof n=="function"?n:m(+n),l):y},l.endAngle=function(n){return arguments.length?(g=typeof n=="function"?n:m(+n),l):g},l.padAngle=function(n){return arguments.length?(c=typeof n=="function"?n:m(+n),l):c},l}export{wn as a,Pn as l,En as p};
