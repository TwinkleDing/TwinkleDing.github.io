import{A as C,d as w,B as v,v as y,C as B,o as D,a as _}from"./element-plus.9672f9b1.js";import{u as F}from"./vuex.95ee8266.js";import{_ as T}from"./index.cd8757c6.js";import{d as V,b as k,Y as f,x as S,o as I,c as P,S as t,Q as i,a as n,U as R,M as N,b5 as U,b4 as $,a0 as r}from"./@vue.0176e29f.js";import"./@vueuse.ea854302.js";import"./dayjs.810e77a2.js";import"./@intlify.7d747563.js";import"./lodash-es.c5a0ee5e.js";import"./async-validator.5d25c98b.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.ef7e3c46.js";import"./axios.e9656f83.js";import"./nprogress.1a08f112.js";import"./vue-i18n.2c7675d4.js";import"./vue.39eaecfc.js";const A=V({name:"Permission",setup(){const e=F(),a=k(!1),E=f({children:"children",label:"name"}),p=f({}),h=f([{userId:"TwinkleDing",userName:"TwinkleDing",description:"\u6E38\u5BA2\u8D26\u53F7"}]),b=()=>{a.value=!0,e.dispatch("router").then(s=>{p.value=l(s)})},l=s=>s.map(o=>(o.label=o.meta.label,o.permission=o.meta.permission,o.children&&l(o.children),o)),u=s=>{console.log(s.permission)},d=()=>{a.value=!1},c=async()=>{let s=[...await e.dispatch("getRouteList")];s.length>3?(s.splice(1,1),_({type:"success",message:"\u8DEF\u7531\u8BBE\u7F6E\u6210\u529F\uFF0C\u5C06\u5237\u65B0\u9875\u9762"}),setTimeout(()=>{e.commit("SET_ROUTE_LIST",s),window.location.reload()},1e3)):_({type:"error",message:"\u65E0\u6CD5\u7EE7\u7EED\u8BBE\u7F6E\u8DEF\u7531\u6743\u9650"})},m=async()=>{let s=[...await e.dispatch("router")];_({type:"success",message:"\u8DEF\u7531\u6062\u590D\u6210\u529F\uFF0C\u5C06\u5237\u65B0\u9875\u9762"}),setTimeout(()=>{e.commit("SET_ROUTE_LIST",s),window.location.reload()},1e3)};return S(()=>{}),{dialogVisible:a,defaultProps:E,tree:p,tableData:h,openPermission:b,switchPermission:u,savePermission:d,permissionRoute:c,restoreRoute:m}}}),z=e=>(U("data-v-67e6dfac"),e=e(),$(),e),L=z(()=>n("div",null," \u7528\u6237\u5217\u8868 ",-1)),M=r(" \u6743\u9650\u9875\u9762\u8BBE\u7F6E "),O=r(" \u6062\u590D "),Q=r(" \u67E5\u770B\u6743\u9650 "),Y={class:"custom-tree-node"},j={class:"dialog-footer"},q=r("\u53D6\u6D88"),G=r("\u786E\u5B9A");function H(e,a,E,p,h,b){const l=C,u=w,d=v,c=y,m=B,s=D;return I(),P(N,null,[L,t(d,{data:e.tableData,style:{width:"100%"}},{default:i(()=>[t(l,{prop:"userId",label:"userId",width:"180"}),t(l,{prop:"userName",label:"userName",width:"180"}),t(l,{prop:"description",label:"description"}),t(l,{label:"Operations"},{default:i(()=>[n("template",null,[t(u,{type:"primary",size:"small",onClick:e.permissionRoute},{default:i(()=>[M]),_:1},8,["onClick"]),t(u,{type:"success",size:"small",onClick:e.restoreRoute},{default:i(()=>[O]),_:1},8,["onClick"]),t(u,{type:"primary",size:"small",onClick:e.openPermission},{default:i(()=>[Q]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),t(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=o=>e.dialogVisible=o),title:"\u6743\u9650\u7BA1\u7406",width:"600px","destroy-on-close":!0},{footer:i(()=>[n("span",j,[t(u,{onClick:a[0]||(a[0]=o=>e.dialogVisible=!1)},{default:i(()=>[q]),_:1}),t(u,{type:"primary",onClick:e.savePermission},{default:i(()=>[G]),_:1},8,["onClick"])])]),default:i(()=>[t(m,{data:e.tree.value,props:e.defaultProps},{default:i(({data:o})=>[n("span",Y,[n("span",null,R(o.label),1),n("span",null,[t(c,{disabled:o.name.includes("home"),modelValue:o.permission,"onUpdate:modelValue":g=>o.permission=g,onChange:g=>e.switchPermission(o)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])])]),_:1},8,["data","props"])]),_:1},8,["modelValue"])],64)}var ce=T(A,[["render",H],["__scopeId","data-v-67e6dfac"]]);export{ce as default};
