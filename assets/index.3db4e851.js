import{u as S}from"./vuex.95ee8266.js";import{k as T,l as B,d as I,n as U,a as f,S as X}from"./element-plus.9672f9b1.js";import{b as z}from"./vue-router.ef7e3c46.js";import{B as R,_ as C}from"./index.cd8757c6.js";import{a as L}from"./axios.e9656f83.js";import{u as O,k as A}from"./@element-plus.99ebd0f1.js";import{d as F,b as m,o as $,c as E,S as t,Q as l,u as x,a0 as v,U as d,q as D,a as k,V as G,P as N,O as b}from"./@vue.0176e29f.js";import{W}from"./Waves.064b5990.js";import"./@vueuse.ea854302.js";import"./dayjs.810e77a2.js";import"./@intlify.7d747563.js";import"./lodash-es.c5a0ee5e.js";import"./async-validator.5d25c98b.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./nprogress.1a08f112.js";import"./vue-i18n.2c7675d4.js";import"./vue.39eaecfc.js";import"./three.bd1d99ed.js";const q=_=>L({url:`${R}/auth/login`,method:"POST",data:_}),M=_=>L({url:`${R}/auth/register`,method:"POST",data:_});const Q={class:"login"},j=F({emits:["register"],setup(_,{emit:y}){const{proxy:p}=D();z();const u=S(),n=m(""),i=m(""),o=()=>{if(!n.value){f({type:"error",message:"\u8BF7\u8F93\u5165\u8D26\u53F7\uFF01"});return}if(!i.value){f({type:"error",message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"});return}const s={username:n.value,password:i.value};q(s).then(e=>{if(e.status===200){f({type:"success",message:e.message});const a={userName:n.value,type:"user"};u.commit("SET_USER_INFO",a),c()}else f({type:"error",message:e.message})})},r=()=>{y("register")},g=()=>{const s={userName:"twinkleDing",type:"tourist"};u.commit("SET_USER_INFO",s),c()},c=()=>{X.service({lock:!0,text:p.$t("loading"),background:"rgba(0, 0, 0, 0.7)"}),setTimeout(()=>{window.location.href="/"},1e3)};return(s,e)=>{const a=T,h=B,w=I,P=U;return $(),E("div",Q,[t(P,{ref:"form","label-width":"0px"},{default:l(()=>[t(h,null,{default:l(()=>[t(a,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=V=>n.value=V),placeholder:s.$t("login.userName"),"prefix-icon":x(O)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),t(h,null,{default:l(()=>[t(a,{type:"password",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=V=>i.value=V),placeholder:s.$t("login.userPassword"),"prefix-icon":x(A),onChange:o},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),t(h,{class:"login-handle"},{default:l(()=>[t(w,{type:"primary",onClick:r},{default:l(()=>[v(d(s.$t("login.register")),1)]),_:1}),t(w,{type:"primary",onClick:o},{default:l(()=>[v(d(s.$t("login.login")),1)]),_:1}),t(w,{type:"primary",onClick:g},{default:l(()=>[v(d(s.$t("login.touristsLogin")),1)]),_:1})]),_:1})]),_:1},512)])}}});var H=C(j,[["__scopeId","data-v-00a39d7a"]]);const J={class:"register"},K=F({emits:["register"],setup(_,{emit:y}){const p=m(""),u=m(""),n=()=>{const o={username:p.value,password:u.value};M(o).then(r=>{r.status===200?f({type:"success",message:r.message}):f({type:"error",message:r.message})})},i=()=>{y("register")};return(o,r)=>{const g=T,c=B,s=I,e=U;return $(),E("div",J,[t(e,{ref:"form","label-width":"0px"},{default:l(()=>[t(c,null,{default:l(()=>[t(g,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=a=>p.value=a),placeholder:o.$t("login.userName"),"prefix-icon":x(O)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),t(c,null,{default:l(()=>[t(g,{type:"password",modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=a=>u.value=a),placeholder:o.$t("login.userPassword"),"prefix-icon":x(A)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),t(c,null,{default:l(()=>[t(s,{type:"primary",onClick:i},{default:l(()=>[v(d(o.$t("login.back")),1)]),_:1}),t(s,{style:{margin:"0 12px"},type:"primary",onClick:n},{default:l(()=>[v(d(o.$t("login.sure")),1)]),_:1})]),_:1})]),_:1},512)])}}});var Y=C(K,[["__scopeId","data-v-7170fbc1"]]);const Z={class:"login-box"},ee={class:"language"},te=v(" / "),oe=F({setup(_){const{proxy:y}=D(),p=S();m("https://github.com/TwinkleDing/vue-vite"),m("https://github.com/TwinkleDing/koa-mongodb");const u=m(p.getters.language),n=m(!1),i=m(!1),o=m("transformX"),r=e=>{y.$i18n.locale=e,u.value=e,p.commit("SET_LANGUAGE",e)},g=()=>{o.value="pause",s(()=>{n.value=!0,o.value="transformX"},600)},c=()=>{o.value="pause",s(()=>{n.value=!1,o.value="transformX"},600)},s=(e,a)=>{i.value||(i.value=setTimeout(()=>{e(),clearTimeout(i.value),i.value=!1},a))};return(e,a)=>($(),E("div",Z,[k("div",{class:b(["login-box-content",o.value==="transformX"?"transformX":""])},[k("div",{class:"title text-center",style:G({color:x(p).getters.systemTheme})},d(e.$t("login.title")),5),n.value?($(),N(Y,{key:1,onRegister:c})):($(),N(H,{key:0,onRegister:g})),k("div",ee,[k("span",{onClick:a[0]||(a[0]=h=>r("zh")),class:b([u.value==="zh"?"language-active":""])},d(e.$t("chinese")),3),te,k("span",{onClick:a[1]||(a[1]=h=>r("en")),class:b([u.value==="en"?"language-active":""])},d(e.$t("english")),3)])],2),t(W,{class:"model"})]))}});var Ve=C(oe,[["__scopeId","data-v-247e7dd8"]]);export{Ve as default};
