import{_ as Pn,a as Ze,d as $e,t as wt,E as Xe,c as In,g as Pt,w as On,f as Fn}from"./base.8c77a7c1.js";import{Q as dt,L as Dn,a as be,F as en,C as q,S as $n,P as Hn,D as Ue,M as De,b as Ce,V as X,s as oe,T as Bn,I as Gn,c as Un,d as Me,e as jn,f as zn,B as It,g as tn,h as nn,R as ut,i as fe,j as at,k as Vn,l as vt,m as sn,n as Kn,o as ht,p as Yn,q as ae,r as Xn,t as Wn,u as qn,v as on,G as He,w as je,x as Zn,O as Jn,y as an,A as Qn,z as es,E as ts,H as rn,J as ns,K as ln,N as ss,U as is,W as os,X as as,Y as rs,Z as ls,_ as cs,$ as ds,a0 as Ot,a1 as us,a2 as hs,a3 as Ft,a4 as ps,a5 as fs,a6 as z,a7 as ms,a8 as gs,a9 as _e,aa as xe,ab as Dt,ac as Le,ad as Je,ae as yt,af as At,ag as Re,ah as _t,ai as bs,aj as Qe,ak as cn,al as ws,am as vs,an as ys,ao as As,ap as dn,aq as $t,ar as Ht,as as _s,at as xs,au as un,av as Es,aw as Ts,ax as Ss,ay as Ms,az as Bt,aA as Ls,aB as Rs}from"./Earth.8bc58901.js";import{_ as et}from"./index.ca41596a.js";import{d as ye,o as W,i as ue,A as ze,F as xt,n as V,U as we,V as hn,W as ge,O as Cs,Q as ks,D as Et,N as pt,G as qe,h as ke,X as pn,Y as B,H as Ns,I as fn,Z as Ps,L as Is,R as Os,_ as Fs,$ as Ds,a0 as $s,P as Se,a1 as tt,a2 as mn,a3 as gn,a4 as Hs,j as Ee,w as Te,c as Ie}from"./vendor.acbd4485.js";import{u as bn,_ as wn,a as Bs,b as Gs,E as We,U as vn,I as yn}from"./plugin-vue_export-helper.72d2a334.js";import{m as An}from"./typescript.72bf8adc.js";import{a as Us}from"./arrow-left.0e6548c8.js";import{a as js}from"./arrow-right.da9618ab.js";const zs=ye({name:"Plus"}),Vs={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ks=ze("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0164 0v352h352a32 32 0 110 64H544v352a32 32 0 11-64 0V544H128a32 32 0 010-64h352z"},null,-1),Ys=[Ks];function Xs(c,e,n,t,s,i){return W(),ue("svg",Vs,Ys)}var Ws=Pn(zs,[["render",Xs]]);const nt=Symbol("tabsRootContextKey"),qs=Ze({tabs:{type:$e(Array),default:()=>An([])}}),Gt="ElTabBar",Zs=ye({name:Gt,props:qs,setup(c){const e=Et(),n=xt(nt);n||wt(Gt,"must use with ElTabs");const t=V(),s=V(),i=()=>{let r=0,a=0;const l=["top","bottom"].includes(n.props.tabPosition)?"width":"height",d=l==="width"?"x":"y";return c.tabs.every(u=>{var h,f,w,g;const m=(f=(h=e.parent)==null?void 0:h.refs)==null?void 0:f[`tab-${u.paneName}`];if(!m)return!1;if(!u.active)return!0;a=m[`client${ge(l)}`];const b=d==="x"?"left":"top";r=m.getBoundingClientRect()[b]-((g=(w=m.parentElement)==null?void 0:w.getBoundingClientRect()[b])!=null?g:0);const x=window.getComputedStyle(m);return l==="width"&&(c.tabs.length>1&&(a-=parseFloat(x.paddingLeft)+parseFloat(x.paddingRight)),r+=parseFloat(x.paddingLeft)),!1}),{[l]:`${a}px`,transform:`translate${ge(d)}(${r}px)`}},o=()=>s.value=i();return we(()=>c.tabs,async()=>{await hn(),o()},{immediate:!0}),bn(t,()=>o()),{bar$:t,rootTabs:n,barStyle:s,update:o}}});function Js(c,e,n,t,s,i){return W(),ue("div",{ref:"bar$",class:Cs(["el-tabs__active-bar",`is-${c.rootTabs.props.tabPosition}`]),style:ks(c.barStyle)},null,6)}var Qs=wn(Zs,[["render",Js]]);const ei=Ze({panes:{type:$e(Array),default:()=>An([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:$e(Function),default:pt},onTabRemove:{type:$e(Function),default:pt},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ut="ElTabNav";var ti=ye({name:Ut,props:ei,setup(c,{expose:e}){const n=Bs(),t=Gs(),s=xt(nt);s||wt(Ut,"ElTabNav must be nested inside ElTabs");const i=V(!1),o=V(0),r=V(!1),a=V(!0),l=V(),d=V(),u=V(),h=qe(()=>["top","bottom"].includes(s.props.tabPosition)?"width":"height"),f=qe(()=>({transform:`translate${h.value==="width"?"X":"Y"}(-${o.value}px)`})),w=()=>{if(!l.value)return;const v=l.value[`offset${ge(h.value)}`],k=o.value;if(!k)return;const A=k>v?k-v:0;o.value=A},g=()=>{if(!l.value||!d.value)return;const v=d.value[`offset${ge(h.value)}`],k=l.value[`offset${ge(h.value)}`],A=o.value;if(v-A<=k)return;const M=v-A>k*2?A+k:v-k;o.value=M},m=()=>{const v=d.value;if(!i.value||!u.value||!l.value||!v)return;const k=u.value.querySelector(".is-active");if(!k)return;const A=l.value,M=["top","bottom"].includes(s.props.tabPosition),L=k.getBoundingClientRect(),y=A.getBoundingClientRect(),T=M?v.offsetWidth-y.width:v.offsetHeight-y.height,E=o.value;let _=E;M?(L.left<y.left&&(_=E-(y.left-L.left)),L.right>y.right&&(_=E+L.right-y.right)):(L.top<y.top&&(_=E-(y.top-L.top)),L.bottom>y.bottom&&(_=E+(L.bottom-y.bottom))),_=Math.max(_,0),o.value=Math.min(_,T)},b=()=>{if(!d.value||!l.value)return;const v=d.value[`offset${ge(h.value)}`],k=l.value[`offset${ge(h.value)}`],A=o.value;if(k<v){const M=o.value;i.value=i.value||{},i.value.prev=M,i.value.next=M+k<v,v-M<k&&(o.value=v-k)}else i.value=!1,A>0&&(o.value=0)},x=v=>{const k=v.code,{up:A,down:M,left:L,right:y}=We;if(![A,M,L,y].includes(k))return;const T=Array.from(v.currentTarget.querySelectorAll("[role=tab]")),E=T.indexOf(v.target);let _;k===L||k===A?E===0?_=T.length-1:_=E-1:E<T.length-1?_=E+1:_=0,T[_].focus(),T[_].click(),S()},S=()=>{a.value&&(r.value=!0)},F=()=>r.value=!1;return we(n,v=>{v==="hidden"?a.value=!1:v==="visible"&&setTimeout(()=>a.value=!0,50)}),we(t,v=>{v?setTimeout(()=>a.value=!0,50):a.value=!1}),bn(u,b),ke(()=>setTimeout(()=>m(),0)),pn(()=>b()),e({scrollToActiveTab:m,removeFocus:F}),()=>{const v=i.value?[B("span",{class:["el-tabs__nav-prev",i.value.prev?"":"is-disabled"],onClick:w},[B(Xe,{},{default:()=>B(Us)})]),B("span",{class:["el-tabs__nav-next",i.value.next?"":"is-disabled"],onClick:g},[B(Xe,{},{default:()=>B(js)})])]:null,k=c.panes.map((A,M)=>{var L,y;const T=A.props.name||A.index||`${M}`,E=A.isClosable||c.editable;A.index=`${M}`;const _=E?B(Xe,{class:"is-icon-close",onClick:N=>c.onTabRemove(A,N)},{default:()=>B(In)}):null,R=((y=(L=A.instance.slots).label)==null?void 0:y.call(L))||A.props.label,O=A.active?0:-1;return B("div",{class:{"el-tabs__item":!0,[`is-${s.props.tabPosition}`]:!0,"is-active":A.active,"is-disabled":A.props.disabled,"is-closable":E,"is-focus":r},id:`tab-${T}`,key:`tab-${T}`,"aria-controls":`pane-${T}`,role:"tab","aria-selected":A.active,ref:`tab-${T}`,tabindex:O,onFocus:()=>S(),onBlur:()=>F(),onClick:N=>{F(),c.onTabClick(A,T,N)},onKeydown:N=>{E&&(N.code===We.delete||N.code===We.backspace)&&c.onTabRemove(A,N)}},[R,_])});return B("div",{ref:u,class:["el-tabs__nav-wrap",i.value?"is-scrollable":"",`is-${s.props.tabPosition}`]},[v,B("div",{class:"el-tabs__nav-scroll",ref:l},[B("div",{class:["el-tabs__nav",`is-${s.props.tabPosition}`,c.stretch&&["top","bottom"].includes(s.props.tabPosition)?"is-stretch":""],ref:d,style:f.value,role:"tablist",onKeydown:x},[c.type?null:B(Qs,{tabs:[...c.panes]}),k])])])}}});const ni=Ze({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:String,default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number],default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:$e(Function),default:()=>!0},stretch:Boolean}),si={[vn]:c=>typeof c=="string"||typeof c=="number",[yn]:c=>typeof c=="string"||typeof c=="number","tab-click":(c,e)=>e instanceof Event,edit:(c,e)=>e==="remove"||e==="add","tab-remove":c=>typeof c=="string"||typeof c=="number","tab-add":()=>!0},_n=(c,e=[])=>{const n=c.children||[];return Array.from(n).forEach(t=>{let s=t.type;s=s.name||s,s==="ElTabPane"&&t.component?e.push(t.component):(s===Is||s==="template")&&_n(t,e)}),e};var ii=ye({name:"ElTabs",props:ni,emits:si,setup(c,{emit:e,slots:n,expose:t}){const s=Et(),i=V(),o=V([]),r=V(c.modelValue||c.activeName||"0"),a={},l=(g=!1)=>{if(n.default){const m=s.subTree.children,b=Array.from(m).find(({props:F})=>(F==null?void 0:F.class)==="el-tabs__content");if(!b)return;const x=_n(b).map(F=>a[F.uid]),S=!(x.length===o.value.length&&x.every((F,v)=>F.uid===o.value[v].uid));(g||S)&&(o.value=x)}else o.value.length!==0&&(o.value=[])},d=g=>{r.value=g,e(yn,g),e(vn,g)},u=g=>{var m;if(r.value===g)return;const b=(m=c.beforeLeave)==null?void 0:m.call(c,g,r.value);Ps(b)?b.then(()=>{var x,S;d(g),(S=(x=i.value)==null?void 0:x.removeFocus)==null||S.call(x)},pt):b!==!1&&d(g)},h=(g,m,b)=>{g.props.disabled||(u(m),e("tab-click",g,b))},f=(g,m)=>{g.props.disabled||(m.stopPropagation(),e("edit",g.props.name,"remove"),e("tab-remove",g.props.name))},w=()=>{e("edit",null,"add"),e("tab-add")};return pn(()=>l()),ke(()=>l()),we(()=>c.activeName,g=>u(g)),we(()=>c.modelValue,g=>u(g)),we(r,async()=>{var g,m;l(!0),await hn(),await((g=i.value)==null?void 0:g.$nextTick()),(m=i.value)==null||m.scrollToActiveTab()}),Ns(nt,{props:c,currentName:r,updatePaneState:g=>a[g.uid]=g}),t({currentName:r}),()=>{const g=c.editable||c.addable?B("span",{class:"el-tabs__new-tab",tabindex:"0",onClick:w,onKeydown:x=>{x.code===We.enter&&w()}},[B(Xe,{class:"is-icon-plus"},{default:()=>B(Ws)})]):null,m=B("div",{class:["el-tabs__header",`is-${c.tabPosition}`]},[g,B(ti,{currentName:r.value,editable:c.editable,type:c.type,panes:o.value,stretch:c.stretch,ref:i,onTabClick:h,onTabRemove:f})]),b=B("div",{class:"el-tabs__content"},[fn(n,"default")]);return B("div",{class:{"el-tabs":!0,"el-tabs--card":c.type==="card",[`el-tabs--${c.tabPosition}`]:!0,"el-tabs--border-card":c.type==="border-card"}},c.tabPosition!=="bottom"?[m,b]:[b,m])}}});const oi=Ze({label:{type:String,default:""},name:{type:[String,Number],default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),jt="ElTabPane",ai=ye({name:jt,props:oi,setup(c){const e=Et(),n=xt(nt);n||wt(jt,"must use with ElTabs");const t=V(),s=V(!1),i=qe(()=>c.closable||n.props.closable),o=Pt(()=>n.currentName.value===(c.name||t.value)),r=qe(()=>c.name||t.value),a=Pt(()=>!c.lazy||s.value||o.value);return we(o,l=>{l&&(s.value=!0)}),n.updatePaneState(Os({uid:e.uid,instance:Fs(e),props:c,paneName:r,active:o,index:t,isClosable:i})),{active:o,paneName:r,shouldBeRender:a}}}),ri=["id","aria-hidden","aria-labelledby"];function li(c,e,n,t,s,i){return c.shouldBeRender?Ds((W(),ue("div",{key:0,id:`pane-${c.paneName}`,class:"el-tab-pane",role:"tabpanel","aria-hidden":!c.active,"aria-labelledby":`tab-${c.paneName}`},[fn(c.$slots,"default")],8,ri)),[[$s,c.active]]):Se("v-if",!0)}var xn=wn(ai,[["render",li]]);const ci=On(ii,{TabPane:xn}),di=Fn(xn);var de=function(){var c=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(d){d.preventDefault(),t(++c%e.children.length)},!1);function n(d){return e.appendChild(d.dom),d}function t(d){for(var u=0;u<e.children.length;u++)e.children[u].style.display=u===d?"block":"none";c=d}var s=(performance||Date).now(),i=s,o=0,r=n(new de.Panel("FPS","#0ff","#002")),a=n(new de.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=n(new de.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:e,addPanel:n,showPanel:t,begin:function(){s=(performance||Date).now()},end:function(){o++;var d=(performance||Date).now();if(a.update(d-s,200),d>=i+1e3&&(r.update(o*1e3/(d-i),100),i=d,o=0,l)){var u=performance.memory;l.update(u.usedJSHeapSize/1048576,u.jsHeapSizeLimit/1048576)}return d},update:function(){s=this.end()},domElement:e,setMode:t}};de.Panel=function(c,e,n){var t=1/0,s=0,i=Math.round,o=i(window.devicePixelRatio||1),r=80*o,a=48*o,l=3*o,d=2*o,u=3*o,h=15*o,f=74*o,w=30*o,g=document.createElement("canvas");g.width=r,g.height=a,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,r,a),m.fillStyle=e,m.fillText(c,l,d),m.fillRect(u,h,f,w),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(u,h,f,w),{dom:g,update:function(b,x){t=Math.min(t,b),s=Math.max(s,b),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,r,h),m.fillStyle=e,m.fillText(i(b)+" "+c+" ("+i(t)+"-"+i(s)+")",l,d),m.drawImage(g,u+o,h,f-o,w,u,h,f-o,w),m.fillRect(u+f-o,h,o,w),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(u+f-o,h,o,i((1-b/x)*w))}}};/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.0
 * @author George Michael Brower
 * @license MIT
 */class te{constructor(e,n,t,s,i="div"){this.parent=e,this.object=n,this.property=t,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),te.nextNameID=te.nextNameID||0,this.$name.id="lil-gui-name-"+ ++te.nextNameID,this.$widget=document.createElement(i),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(t)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const n=this.parent.add(this.object,this.property,e);return n.name(this._name),this.destroy(),n}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class ui extends te{constructor(e,n,t){super(e,n,t,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function ft(c){let e,n;return(e=c.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=c.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=c.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!n&&"#"+n}const hi={isPrimitive:!0,match:c=>typeof c=="string",fromHexString:ft,toHexString:ft},Be={isPrimitive:!0,match:c=>typeof c=="number",fromHexString:c=>parseInt(c.substring(1),16),toHexString:c=>"#"+c.toString(16).padStart(6,0)},pi={isPrimitive:!1,match:Array.isArray,fromHexString(c,e,n=1){const t=Be.fromHexString(c);e[0]=(t>>16&255)/255*n,e[1]=(t>>8&255)/255*n,e[2]=(255&t)/255*n},toHexString:([c,e,n],t=1)=>Be.toHexString(c*(t=255/t)<<16^e*t<<8^n*t<<0)},fi={isPrimitive:!1,match:c=>Object(c)===c,fromHexString(c,e,n=1){const t=Be.fromHexString(c);e.r=(t>>16&255)/255*n,e.g=(t>>8&255)/255*n,e.b=(255&t)/255*n},toHexString:({r:c,g:e,b:n},t=1)=>Be.toHexString(c*(t=255/t)<<16^e*t<<8^n*t<<0)},mi=[hi,Be,pi,fi];class gi extends te{constructor(e,n,t,s){var i;super(e,n,t,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,mi.find(o=>o.match(i))),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=ft(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const n=this._format.fromHexString(e);this.setValue(n)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class rt extends te{constructor(e,n,t){super(e,n,t,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",s=>{s.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class bi extends te{constructor(e,n,t,s,i,o){super(e,n,t,"number"),this._initInput(),this.min(s),this.max(i);const r=o!==void 0;this.step(r?o:this._getImplicitStep(),r),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,n=!0){return this._step=e,this._stepExplicit=n,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let n=(e-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=100*n+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=d=>{const u=parseFloat(this.$input.value);isNaN(u)||(this._snapClampSetValue(u+d),this.$input.value=this.getValue())};let n,t,s,i,o,r=!1;const a=d=>{if(r){const u=d.clientX-n,h=d.clientY-t;Math.abs(h)>5?(d.preventDefault(),this.$input.blur(),r=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(u)>5&&l()}r||(o-=(d.clientY-s)*this._step*this._arrowKeyMultiplier(d),i+o>this._max?o=this._max-i:i+o<this._min&&(o=this._min-i),this._snapClampSetValue(i+o)),s=d.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{const d=parseFloat(this.$input.value);isNaN(d)||this.setValue(this._clamp(d))}),this.$input.addEventListener("keydown",d=>{d.code==="Enter"&&this.$input.blur(),d.code==="ArrowUp"&&(d.preventDefault(),e(this._step*this._arrowKeyMultiplier(d))),d.code==="ArrowDown"&&(d.preventDefault(),e(this._step*this._arrowKeyMultiplier(d)*-1))}),this.$input.addEventListener("wheel",d=>{this._inputFocused&&(d.preventDefault(),e(this._step*this._normalizeMouseWheel(d)))}),this.$input.addEventListener("mousedown",d=>{n=d.clientX,t=s=d.clientY,r=!0,i=this.getValue(),o=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=h=>{const f=this.$slider.getBoundingClientRect();let w=(g=h,m=f.left,b=f.right,x=this._min,S=this._max,(g-m)/(b-m)*(S-x)+x);var g,m,b,x,S;this._snapClampSetValue(w)},n=h=>{e(h.clientX)},t=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",t)};let s,i,o=!1;const r=h=>{h.preventDefault(),this._setDraggingStyle(!0),e(h.touches[0].clientX),o=!1},a=h=>{if(o){const f=h.touches[0].clientX-s,w=h.touches[0].clientY-i;Math.abs(f)>Math.abs(w)?r(h):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l))}else h.preventDefault(),e(h.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l)},d=this._callOnFinishChange.bind(this);let u;this.$slider.addEventListener("mousedown",h=>{this._setDraggingStyle(!0),e(h.clientX),window.addEventListener("mousemove",n),window.addEventListener("mouseup",t)}),this.$slider.addEventListener("touchstart",h=>{h.touches.length>1||(this._hasScrollBar?(s=h.touches[0].clientX,i=h.touches[0].clientY,o=!0):r(h),window.addEventListener("touchmove",a),window.addEventListener("touchend",l))}),this.$slider.addEventListener("wheel",h=>{if(Math.abs(h.deltaX)<Math.abs(h.deltaY)&&this._hasScrollBar)return;h.preventDefault();const f=this._normalizeMouseWheel(h)*this._step;this._snapClampSetValue(this.getValue()+f),this.$input.value=this.getValue(),clearTimeout(u),u=setTimeout(d,400)})}_setDraggingStyle(e,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+n,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:n,deltaY:t}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(n=0,t=-e.wheelDelta/120,t*=this._stepExplicit?1:10),n+-t}_arrowKeyMultiplier(e){let n=this._stepExplicit?1:10;return e.shiftKey?n*=10:e.altKey&&(n/=10),n}_snap(e){const n=Math.round(e/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class wi extends te{constructor(e,n,t,s){super(e,n,t,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(s)?s:Object.values(s),this._names=Array.isArray(s)?s:Object.keys(s),this._names.forEach(i=>{const o=document.createElement("option");o.innerHTML=i,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),n=this._values.indexOf(e);return this.$select.selectedIndex=n,this.$display.innerHTML=n===-1?e:this._names[n],this}}class vi extends te{constructor(e,n,t){super(e,n,t,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",s=>{s.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let zt=!1;class Ve{constructor({parent:e,autoPlace:n=e===void 0,container:t,width:s,title:i="Controls",injectStyles:o=!0,touchStyles:r=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",a=>{a.code!=="Enter"&&a.code!=="Space"||(a.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),r&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!zt&&o&&(function(a){const l=document.createElement("style");l.innerHTML=a;const d=document.querySelector("head link[rel=stylesheet], head style");d?document.head.insertBefore(l,d):document.head.appendChild(l)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),zt=!0),t?t.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this.domElement.addEventListener("keydown",a=>a.stopPropagation()),this.domElement.addEventListener("keyup",a=>a.stopPropagation())}add(e,n,t,s,i){if(Object(t)===t)return new wi(this,e,n,t);const o=e[n];switch(typeof o){case"number":return new bi(this,e,n,t,s,i);case"boolean":return new ui(this,e,n);case"string":return new vi(this,e,n);case"function":return new rt(this,e,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,e,`
	value:`,o)}addColor(e,n,t=1){return new gi(this,e,n,t)}addFolder(e){return new Ve({parent:this,title:e})}load(e,n=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof rt||t._name in e.controllers&&t.load(e.controllers[t._name])}),n&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(t=>{if(!(t instanceof rt)){if(t._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);n.controllers[t._name]=t.save()}}),e&&this.folders.forEach(t=>{if(t._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);n.folders[t._title]=t.save()}),n}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const t=i=>{i.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",t))};this.$children.addEventListener("transitionend",t);const s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(n=>n.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(n=>{e=e.concat(n.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(n=>{e=e.concat(n.foldersRecursive())}),e}}class En extends Dn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new xi(n)}),this.register(function(n){return new Ri(n)}),this.register(function(n){return new Ci(n)}),this.register(function(n){return new Ei(n)}),this.register(function(n){return new Ti(n)}),this.register(function(n){return new Si(n)}),this.register(function(n){return new Mi(n)}),this.register(function(n){return new Li(n)}),this.register(function(n){return new Ai(n)}),this.register(function(n){return new ki(n)})}load(e,n,t,s){const i=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=be.extractUrlBase(e),this.manager.itemStart(e);const r=function(l){s?s(l):console.error(l),i.manager.itemError(e),i.manager.itemEnd(e)},a=new en(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{i.parse(l,o,function(d){n(d),i.manager.itemEnd(e)},r)}catch(d){r(d)}},t,r)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,s){let i;const o={},r={};if(typeof e=="string")i=e;else if(be.decodeText(new Uint8Array(e,0,4))===Tn){try{o[I.KHR_BINARY_GLTF]=new Ni(e)}catch(u){s&&s(u);return}i=o[I.KHR_BINARY_GLTF].content}else i=be.decodeText(new Uint8Array(e));const a=JSON.parse(i);if(a.asset===void 0||a.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Vi(a,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](l);r[u.name]=u,o[u.name]=!0}if(a.extensionsUsed)for(let d=0;d<a.extensionsUsed.length;++d){const u=a.extensionsUsed[d],h=a.extensionsRequired||[];switch(u){case I.KHR_MATERIALS_UNLIT:o[u]=new _i;break;case I.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new Oi;break;case I.KHR_DRACO_MESH_COMPRESSION:o[u]=new Pi(a,this.dracoLoader);break;case I.KHR_TEXTURE_TRANSFORM:o[u]=new Ii;break;case I.KHR_MESH_QUANTIZATION:o[u]=new Fi;break;default:h.indexOf(u)>=0&&r[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(r),l.parse(t,s)}parseAsync(e,n){const t=this;return new Promise(function(s,i){t.parse(e,n,s,i)})}}function yi(){let c={};return{get:function(e){return c[e]},add:function(e,n){c[e]=n},remove:function(e){delete c[e]},removeAll:function(){c={}}}}const I={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Ai{constructor(e){this.parser=e,this.name=I.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let t=0,s=n.length;t<s;t++){const i=n[t];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const n=this.parser,t="light:"+e;let s=n.cache.get(t);if(s)return s;const i=n.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let l;const d=new q(16777215);a.color!==void 0&&d.fromArray(a.color);const u=a.range!==void 0?a.range:0;switch(a.type){case"directional":l=new Ue(d),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Hn(d),l.distance=u;break;case"spot":l=new $n(d),l.distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,l.angle=a.spot.outerConeAngle,l.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return l.position.set(0,0,0),l.decay=2,a.intensity!==void 0&&(l.intensity=a.intensity),l.name=n.createUniqueName(a.name||"light_"+e),s=Promise.resolve(l),n.cache.add(t,s),s}createNodeAttachment(e){const n=this,t=this.parser,i=t.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return r===void 0?null:this._loadLight(r).then(function(a){return t._getNodeRef(n.cache,r,a)})}}class _i{constructor(){this.name=I.KHR_MATERIALS_UNLIT}getMaterialType(){return De}extendParams(e,n,t){const s=[];e.color=new q(1,1,1),e.opacity=1;const i=n.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}i.baseColorTexture!==void 0&&s.push(t.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(s)}}class xi{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&i.push(t.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&i.push(t.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(i.push(t.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const r=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new X(r,r)}return Promise.all(i)}}class Ei{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[];n.sheenColor=new q(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=s.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&i.push(t.assignTexture(n,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&i.push(t.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class Ti{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&i.push(t.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class Si{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&i.push(t.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||0;const r=o.attenuationColor||[1,1,1];return n.attenuationColor=new q(r[0],r[1],r[2]),Promise.all(i)}}class Mi{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name];return n.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class Li{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ce}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&i.push(t.assignTexture(n,"specularIntensityMap",o.specularTexture));const r=o.specularColorFactor||[1,1,1];return n.specularColor=new q(r[0],r[1],r[2]),o.specularColorTexture!==void 0&&i.push(t.assignTexture(n,"specularColorMap",o.specularColorTexture).then(function(a){a.encoding=oe})),Promise.all(i)}}class Ri{constructor(e){this.parser=e,this.name=I.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,t=n.json,s=t.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,i.source,o)}}class Ci{constructor(e){this.parser=e,this.name=I.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,s=t.json,i=s.textures[e];if(!i.extensions||!i.extensions[n])return null;const o=i.extensions[n],r=s.images[o.source];let a=t.textureLoader;if(r.uri){const l=t.options.manager.getHandler(r.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,r,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ki{constructor(e){this.name=I.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,t=n.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const s=t.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then(function(r){const a=s.byteOffset||0,l=s.byteLength||0,d=s.count,u=s.byteStride,h=new ArrayBuffer(d*u),f=new Uint8Array(r[0],a,l);return o.decodeGltfBuffer(new Uint8Array(h),d,u,f,s.mode,s.filter),h})}else return null}}const Tn="glTF",Oe=12,Vt={JSON:1313821514,BIN:5130562};class Ni{constructor(e){this.name=I.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Oe);if(this.header={magic:be.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Tn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-Oe,s=new DataView(e,Oe);let i=0;for(;i<t;){const o=s.getUint32(i,!0);i+=4;const r=s.getUint32(i,!0);if(i+=4,r===Vt.JSON){const a=new Uint8Array(e,Oe+i,o);this.content=be.decodeText(a)}else if(r===Vt.BIN){const a=Oe+i;this.body=e.slice(a,a+o)}i+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Pi{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=I.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const t=this.json,s=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,r={},a={},l={};for(const d in o){const u=gt[d]||d.toLowerCase();r[u]=o[d]}for(const d in e.attributes){const u=gt[d]||d.toLowerCase();if(o[d]!==void 0){const h=t.accessors[e.attributes[d]],f=Ge[h.componentType];l[u]=f,a[u]=h.normalized===!0}}return n.getDependency("bufferView",i).then(function(d){return new Promise(function(u){s.decodeDracoFile(d,function(h){for(const f in h.attributes){const w=h.attributes[f],g=a[f];g!==void 0&&(w.normalized=g)}u(h)},r,l)})})}}class Ii{constructor(){this.name=I.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class mt extends vt{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),t=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),r={specular:{value:new q().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=r,this.onBeforeCompile=function(a){for(const l in r)a.uniforms[l]=r[l];a.fragmentShader=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",t).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return r.specular.value},set:function(a){r.specular.value=a}},specularMap:{get:function(){return r.specularMap.value},set:function(a){r.specularMap.value=a,a?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return r.glossiness.value},set:function(a){r.glossiness.value=a}},glossinessMap:{get:function(){return r.glossinessMap.value},set:function(a){r.glossinessMap.value=a,a?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Oi{constructor(){this.name=I.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return mt}extendParams(e,n,t){const s=n.extensions[this.name];e.color=new q(1,1,1),e.opacity=1;const i=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(s.diffuseTexture!==void 0&&i.push(t.assignTexture(e,"map",s.diffuseTexture)),e.emissive=new q(0,0,0),e.glossiness=s.glossinessFactor!==void 0?s.glossinessFactor:1,e.specular=new q(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),s.specularGlossinessTexture!==void 0){const o=s.specularGlossinessTexture;i.push(t.assignTexture(e,"glossinessMap",o)),i.push(t.assignTexture(e,"specularMap",o))}return Promise.all(i)}createMaterial(e){const n=new mt(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=1,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=Bn,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n}}class Fi{constructor(){this.name=I.KHR_MESH_QUANTIZATION}}class ve extends Gn{constructor(e,n,t,s){super(e,n,t,s)}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,s=this.valueSize,i=e*s*3+s;for(let o=0;o!==s;o++)n[o]=t[i+o];return n}}ve.prototype.beforeStart_=ve.prototype.copySampleValue_;ve.prototype.afterEnd_=ve.prototype.copySampleValue_;ve.prototype.interpolate_=function(c,e,n,t){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,r=o*2,a=o*3,l=t-e,d=(n-e)/l,u=d*d,h=u*d,f=c*a,w=f-a,g=-2*h+3*u,m=h-u,b=1-g,x=m-u+d;for(let S=0;S!==o;S++){const F=i[w+S+o],v=i[w+S+r]*l,k=i[f+S+o],A=i[f+S]*l;s[S]=b*F+x*v+g*k+m*A}return s};const Di=new dt;class $i extends ve{interpolate_(e,n,t,s){const i=super.interpolate_(e,n,t,s);return Di.fromArray(i).normalize().toArray(i),i}}const ie={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Kt={9728:ss,9729:tn,9984:is,9985:os,9986:as,9987:nn},Yt={33071:rs,33648:ls,10497:ut},Xt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ce={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hi={CUBICSPLINE:void 0,LINEAR:an,STEP:cs},lt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Bi(c){return c.DefaultMaterial===void 0&&(c.DefaultMaterial=new vt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ds})),c.DefaultMaterial}function Fe(c,e,n){for(const t in n.extensions)c[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=n.extensions[t])}function me(c,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(c.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Gi(c,e,n){let t=!1,s=!1,i=!1;for(let l=0,d=e.length;l<d;l++){const u=e[l];if(u.POSITION!==void 0&&(t=!0),u.NORMAL!==void 0&&(s=!0),u.COLOR_0!==void 0&&(i=!0),t&&s&&i)break}if(!t&&!s&&!i)return Promise.resolve(c);const o=[],r=[],a=[];for(let l=0,d=e.length;l<d;l++){const u=e[l];if(t){const h=u.POSITION!==void 0?n.getDependency("accessor",u.POSITION):c.attributes.position;o.push(h)}if(s){const h=u.NORMAL!==void 0?n.getDependency("accessor",u.NORMAL):c.attributes.normal;r.push(h)}if(i){const h=u.COLOR_0!==void 0?n.getDependency("accessor",u.COLOR_0):c.attributes.color;a.push(h)}}return Promise.all([Promise.all(o),Promise.all(r),Promise.all(a)]).then(function(l){const d=l[0],u=l[1],h=l[2];return t&&(c.morphAttributes.position=d),s&&(c.morphAttributes.normal=u),i&&(c.morphAttributes.color=h),c.morphTargetsRelative=!0,c})}function Ui(c,e){if(c.updateMorphTargets(),e.weights!==void 0)for(let n=0,t=e.weights.length;n<t;n++)c.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(c.morphTargetInfluences.length===n.length){c.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)c.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ji(c){const e=c.extensions&&c.extensions[I.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+Wt(e.attributes):n=c.indices+":"+Wt(c.attributes)+":"+c.mode,n}function Wt(c){let e="";const n=Object.keys(c).sort();for(let t=0,s=n.length;t<s;t++)e+=n[t]+":"+c[n[t]]+";";return e}function bt(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function zi(c){return c.search(/\.jpe?g($|\?)/i)>0||c.search(/^data\:image\/jpeg/)===0?"image/jpeg":c.search(/\.webp($|\?)/i)>0||c.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class Vi{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new yi,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new Un(this.options.manager):this.textureLoader=new Me(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new en(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const t=this,s=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(o){const r={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:t,userData:{}};Fe(i,r,s),me(r,s),Promise.all(t._invokeAll(function(a){return a.afterRoot&&a.afterRoot(r)})).then(function(){e(r)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],t=this.json.meshes||[];for(let s=0,i=n.length;s<i;s++){const o=n[s].joints;for(let r=0,a=o.length;r<a;r++)e[o[r]].isBone=!0}for(let s=0,i=e.length;s<i;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(t[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,t){if(e.refs[n]<=1)return t;const s=t.clone(),i=(o,r)=>{const a=this.associations.get(o);a!=null&&this.associations.set(r,a);for(const[l,d]of o.children.entries())i(d,r.children[l])};return i(t,s),s.name+="_instance_"+e.uses[n]++,s}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let t=0;t<n.length;t++){const s=e(n[t]);if(s)return s}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const t=[];for(let s=0;s<n.length;s++){const i=e(n[s]);i&&t.push(i)}return t}getDependency(e,n){const t=e+":"+n;let s=this.cache.get(t);if(!s){switch(e){case"scene":s=this.loadScene(n);break;case"node":s=this.loadNode(n);break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this.loadAnimation(n);break;case"camera":s=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(t,s)}return s}getDependencies(e){let n=this.cache.get(e);if(!n){const t=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(i,o){return t.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],t=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[I.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,o){t.load(be.resolveURL(n.uri,s.path),i,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(t){const s=n.byteLength||0,i=n.byteOffset||0;return t.slice(i,i+s)})}loadAccessor(e){const n=this,t=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0)return Promise.resolve(null);const i=[];return s.bufferView!==void 0?i.push(this.getDependency("bufferView",s.bufferView)):i.push(null),s.sparse!==void 0&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(o){const r=o[0],a=Xt[s.type],l=Ge[s.componentType],d=l.BYTES_PER_ELEMENT,u=d*a,h=s.byteOffset||0,f=s.bufferView!==void 0?t.bufferViews[s.bufferView].byteStride:void 0,w=s.normalized===!0;let g,m;if(f&&f!==u){const b=Math.floor(h/f),x="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+b+":"+s.count;let S=n.cache.get(x);S||(g=new l(r,b*f,s.count*f/d),S=new jn(g,f/d),n.cache.add(x,S)),m=new zn(S,a,h%f/d,w)}else r===null?g=new l(s.count*a):g=new l(r,h,s.count*a),m=new It(g,a,w);if(s.sparse!==void 0){const b=Xt.SCALAR,x=Ge[s.sparse.indices.componentType],S=s.sparse.indices.byteOffset||0,F=s.sparse.values.byteOffset||0,v=new x(o[1],S,s.sparse.count*b),k=new l(o[2],F,s.sparse.count*a);r!==null&&(m=new It(m.array.slice(),m.itemSize,m.normalized));for(let A=0,M=v.length;A<M;A++){const L=v[A];if(m.setX(L,k[A*a]),a>=2&&m.setY(L,k[A*a+1]),a>=3&&m.setZ(L,k[A*a+2]),a>=4&&m.setW(L,k[A*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const n=this.json,t=this.options,i=n.textures[e].source,o=n.images[i];let r=this.textureLoader;if(o.uri){const a=t.manager.getHandler(o.uri);a!==null&&(r=a)}return this.loadTextureImage(e,i,r)}loadTextureImage(e,n,t){const s=this,i=this.json,o=i.textures[e],r=i.images[n],a=(r.uri||r.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(n,t).then(function(d){d.flipY=!1,o.name&&(d.name=o.name);const h=(i.samplers||{})[o.sampler]||{};return d.magFilter=Kt[h.magFilter]||tn,d.minFilter=Kt[h.minFilter]||nn,d.wrapS=Yt[h.wrapS]||ut,d.wrapT=Yt[h.wrapT]||ut,s.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[a]=l,l}loadImageSource(e,n){const t=this,s=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(function(u){return u.clone()}).catch(function(u){throw u});const o=s.images[e],r=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(o.bufferView!==void 0)a=t.getDependency("bufferView",o.bufferView).then(function(u){l=!0;const h=new Blob([u],{type:o.mimeType});return a=r.createObjectURL(h),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(a).then(function(u){return new Promise(function(h,f){let w=h;n.isImageBitmapLoader===!0&&(w=function(g){const m=new Ot(g);m.needsUpdate=!0,h(m)}),n.load(be.resolveURL(u,i.path),w,void 0,f)})}).then(function(u){return l===!0&&r.revokeObjectURL(a),u.userData.mimeType=o.mimeType||zi(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),u});return this.sourceCache[e]=d,d}assignTexture(e,n,t){const s=this;return this.getDependency("texture",t.index).then(function(i){if(t.texCoord!==void 0&&t.texCoord!=0&&!(n==="aoMap"&&t.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+t.texCoord+" for texture "+n+" not yet supported."),s.extensions[I.KHR_TEXTURE_TRANSFORM]){const o=t.extensions!==void 0?t.extensions[I.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const r=s.associations.get(i);i=s.extensions[I.KHR_TEXTURE_TRANSFORM].extendTexture(i,o),s.associations.set(i,r)}}return e[n]=i,i})}assignFinalMaterial(e){const n=e.geometry;let t=e.material;const s=n.attributes.tangent===void 0,i=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const r="PointsMaterial:"+t.uuid;let a=this.cache.get(r);a||(a=new fe,at.prototype.copy.call(a,t),a.color.copy(t.color),a.map=t.map,a.sizeAttenuation=!1,this.cache.add(r,a)),t=a}else if(e.isLine){const r="LineBasicMaterial:"+t.uuid;let a=this.cache.get(r);a||(a=new Vn,at.prototype.copy.call(a,t),a.color.copy(t.color),this.cache.add(r,a)),t=a}if(s||i||o){let r="ClonedMaterial:"+t.uuid+":";t.isGLTFSpecularGlossinessMaterial&&(r+="specular-glossiness:"),s&&(r+="derivative-tangents:"),i&&(r+="vertex-colors:"),o&&(r+="flat-shading:");let a=this.cache.get(r);a||(a=t.clone(),i&&(a.vertexColors=!0),o&&(a.flatShading=!0),s&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(r,a),this.associations.set(a,this.associations.get(t))),t=a}t.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=t}getMaterialType(){return vt}loadMaterial(e){const n=this,t=this.json,s=this.extensions,i=t.materials[e];let o;const r={},a=i.extensions||{},l=[];if(a[I.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=s[I.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),l.push(u.extendParams(r,i,n))}else if(a[I.KHR_MATERIALS_UNLIT]){const u=s[I.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),l.push(u.extendParams(r,i,n))}else{const u=i.pbrMetallicRoughness||{};if(r.color=new q(1,1,1),r.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;r.color.fromArray(h),r.opacity=h[3]}u.baseColorTexture!==void 0&&l.push(n.assignTexture(r,"map",u.baseColorTexture)),r.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,r.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(r,"metalnessMap",u.metallicRoughnessTexture)),l.push(n.assignTexture(r,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,r)})))}i.doubleSided===!0&&(r.side=sn);const d=i.alphaMode||lt.OPAQUE;if(d===lt.BLEND?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,d===lt.MASK&&(r.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&o!==De&&(l.push(n.assignTexture(r,"normalMap",i.normalTexture)),r.normalScale=new X(1,1),i.normalTexture.scale!==void 0)){const u=i.normalTexture.scale;r.normalScale.set(u,u)}return i.occlusionTexture!==void 0&&o!==De&&(l.push(n.assignTexture(r,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(r.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&o!==De&&(r.emissive=new q().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&o!==De&&l.push(n.assignTexture(r,"emissiveMap",i.emissiveTexture)),Promise.all(l).then(function(){let u;return o===mt?u=s[I.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):u=new o(r),i.name&&(u.name=i.name),u.map&&(u.map.encoding=oe),u.emissiveMap&&(u.emissiveMap.encoding=oe),u.sheenColorMap&&(u.sheenColorMap.encoding=oe),u.specularColorMap&&(u.specularColorMap.encoding=oe),u.specularMap&&(u.specularMap.encoding=oe),me(u,i),n.associations.set(u,{materials:e}),i.extensions&&Fe(s,u,i),u})}createUniqueName(e){const n=Kn.sanitizeNodeName(e||"");let t=n;for(let s=1;this.nodeNamesUsed[t];++s)t=n+"_"+s;return this.nodeNamesUsed[t]=!0,t}loadGeometries(e){const n=this,t=this.extensions,s=this.primitiveCache;function i(r){return t[I.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(r,n).then(function(a){return qt(a,r,n)})}const o=[];for(let r=0,a=e.length;r<a;r++){const l=e[r],d=ji(l),u=s[d];if(u)o.push(u.promise);else{let h;l.extensions&&l.extensions[I.KHR_DRACO_MESH_COMPRESSION]?h=i(l):h=qt(new ht,l,n),s[d]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,t=this.json,s=this.extensions,i=t.meshes[e],o=i.primitives,r=[];for(let a=0,l=o.length;a<l;a++){const d=o[a].material===void 0?Bi(this.cache):this.getDependency("material",o[a].material);r.push(d)}return r.push(n.loadGeometries(o)),Promise.all(r).then(function(a){const l=a.slice(0,a.length-1),d=a[a.length-1],u=[];for(let f=0,w=d.length;f<w;f++){const g=d[f],m=o[f];let b;const x=l[f];if(m.mode===ie.TRIANGLES||m.mode===ie.TRIANGLE_STRIP||m.mode===ie.TRIANGLE_FAN||m.mode===void 0)b=i.isSkinnedMesh===!0?new Yn(g,x):new ae(g,x),b.isSkinnedMesh===!0&&!b.geometry.attributes.skinWeight.normalized&&b.normalizeSkinWeights(),m.mode===ie.TRIANGLE_STRIP?b.geometry=Zt(b.geometry,us):m.mode===ie.TRIANGLE_FAN&&(b.geometry=Zt(b.geometry,ln));else if(m.mode===ie.LINES)b=new Xn(g,x);else if(m.mode===ie.LINE_STRIP)b=new Wn(g,x);else if(m.mode===ie.LINE_LOOP)b=new qn(g,x);else if(m.mode===ie.POINTS)b=new on(g,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(b.geometry.morphAttributes).length>0&&Ui(b,i),b.name=n.createUniqueName(i.name||"mesh_"+e),me(b,i),m.extensions&&Fe(s,b,m),n.assignFinalMaterial(b),u.push(b)}for(let f=0,w=u.length;f<w;f++)n.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const h=new He;n.associations.set(h,{meshes:e});for(let f=0,w=u.length;f<w;f++)h.add(u[f]);return h})}loadCamera(e){let n;const t=this.json.cameras[e],s=t[t.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?n=new je(Zn.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):t.type==="orthographic"&&(n=new Jn(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),t.name&&(n.name=this.createUniqueName(t.name)),me(n,t),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],t={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(t):this.getDependency("accessor",n.inverseBindMatrices).then(function(s){return t.inverseBindMatrices=s,t})}loadAnimation(e){const t=this.json.animations[e],s=[],i=[],o=[],r=[],a=[];for(let l=0,d=t.channels.length;l<d;l++){const u=t.channels[l],h=t.samplers[u.sampler],f=u.target,w=f.node!==void 0?f.node:f.id,g=t.parameters!==void 0?t.parameters[h.input]:h.input,m=t.parameters!==void 0?t.parameters[h.output]:h.output;s.push(this.getDependency("node",w)),i.push(this.getDependency("accessor",g)),o.push(this.getDependency("accessor",m)),r.push(h),a.push(f)}return Promise.all([Promise.all(s),Promise.all(i),Promise.all(o),Promise.all(r),Promise.all(a)]).then(function(l){const d=l[0],u=l[1],h=l[2],f=l[3],w=l[4],g=[];for(let b=0,x=d.length;b<x;b++){const S=d[b],F=u[b],v=h[b],k=f[b],A=w[b];if(S===void 0)continue;S.updateMatrix(),S.matrixAutoUpdate=!0;let M;switch(ce[A.path]){case ce.weights:M=ps;break;case ce.rotation:M=Ft;break;case ce.position:case ce.scale:default:M=hs;break}const L=S.name?S.name:S.uuid,y=k.interpolation!==void 0?Hi[k.interpolation]:an,T=[];ce[A.path]===ce.weights?S.traverse(function(_){_.morphTargetInfluences&&T.push(_.name?_.name:_.uuid)}):T.push(L);let E=v.array;if(v.normalized){const _=bt(E.constructor),R=new Float32Array(E.length);for(let O=0,N=E.length;O<N;O++)R[O]=E[O]*_;E=R}for(let _=0,R=T.length;_<R;_++){const O=new M(T[_]+"."+ce[A.path],F.array,E,y);k.interpolation==="CUBICSPLINE"&&(O.createInterpolant=function(D){const Q=this instanceof Ft?$i:ve;return new Q(this.times,this.values,this.getValueSize()/3,D)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(O)}}const m=t.name?t.name:"animation_"+e;return new Qn(m,void 0,g)})}createNodeMesh(e){const n=this.json,t=this,s=n.nodes[e];return s.mesh===void 0?null:t.getDependency("mesh",s.mesh).then(function(i){const o=t._getNodeRef(t.meshCache,s.mesh,i);return s.weights!==void 0&&o.traverse(function(r){if(!!r.isMesh)for(let a=0,l=s.weights.length;a<l;a++)r.morphTargetInfluences[a]=s.weights[a]}),o})}loadNode(e){const n=this.json,t=this.extensions,s=this,i=n.nodes[e],o=i.name?s.createUniqueName(i.name):"";return function(){const r=[],a=s._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return a&&r.push(a),i.camera!==void 0&&r.push(s.getDependency("camera",i.camera).then(function(l){return s._getNodeRef(s.cameraCache,i.camera,l)})),s._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){r.push(l)}),Promise.all(r)}().then(function(r){let a;if(i.isBone===!0?a=new es:r.length>1?a=new He:r.length===1?a=r[0]:a=new ts,a!==r[0])for(let l=0,d=r.length;l<d;l++)a.add(r[l]);if(i.name&&(a.userData.name=i.name,a.name=o),me(a,i),i.extensions&&Fe(t,a,i),i.matrix!==void 0){const l=new rn;l.fromArray(i.matrix),a.applyMatrix4(l)}else i.translation!==void 0&&a.position.fromArray(i.translation),i.rotation!==void 0&&a.quaternion.fromArray(i.rotation),i.scale!==void 0&&a.scale.fromArray(i.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a})}loadScene(e){const n=this.json,t=this.extensions,s=this.json.scenes[e],i=this,o=new He;s.name&&(o.name=i.createUniqueName(s.name)),me(o,s),s.extensions&&Fe(t,o,s);const r=s.nodes||[],a=[];for(let l=0,d=r.length;l<d;l++)a.push(Sn(r[l],o,n,i));return Promise.all(a).then(function(){const l=d=>{const u=new Map;for(const[h,f]of i.associations)(h instanceof at||h instanceof Ot)&&u.set(h,f);return d.traverse(h=>{const f=i.associations.get(h);f!=null&&u.set(h,f)}),u};return i.associations=l(o),o})}}function Sn(c,e,n,t){const s=n.nodes[c];return t.getDependency("node",c).then(function(i){if(s.skin===void 0)return i;let o;return t.getDependency("skin",s.skin).then(function(r){o=r;const a=[];for(let l=0,d=o.joints.length;l<d;l++)a.push(t.getDependency("node",o.joints[l]));return Promise.all(a)}).then(function(r){return i.traverse(function(a){if(!a.isMesh)return;const l=[],d=[];for(let u=0,h=r.length;u<h;u++){const f=r[u];if(f){l.push(f);const w=new rn;o.inverseBindMatrices!==void 0&&w.fromArray(o.inverseBindMatrices.array,u*16),d.push(w)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}a.bind(new ns(l,d),a.matrixWorld)}),i})}).then(function(i){e.add(i);const o=[];if(s.children){const r=s.children;for(let a=0,l=r.length;a<l;a++){const d=r[a];o.push(Sn(d,i,n,t))}}return Promise.all(o)})}function Ki(c,e,n){const t=e.attributes,s=new fs;if(t.POSITION!==void 0){const r=n.json.accessors[t.POSITION],a=r.min,l=r.max;if(a!==void 0&&l!==void 0){if(s.set(new z(a[0],a[1],a[2]),new z(l[0],l[1],l[2])),r.normalized){const d=bt(Ge[r.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const r=new z,a=new z;for(let l=0,d=i.length;l<d;l++){const u=i[l];if(u.POSITION!==void 0){const h=n.json.accessors[u.POSITION],f=h.min,w=h.max;if(f!==void 0&&w!==void 0){if(a.setX(Math.max(Math.abs(f[0]),Math.abs(w[0]))),a.setY(Math.max(Math.abs(f[1]),Math.abs(w[1]))),a.setZ(Math.max(Math.abs(f[2]),Math.abs(w[2]))),h.normalized){const g=bt(Ge[h.componentType]);a.multiplyScalar(g)}r.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(r)}c.boundingBox=s;const o=new ms;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,c.boundingSphere=o}function qt(c,e,n){const t=e.attributes,s=[];function i(o,r){return n.getDependency("accessor",o).then(function(a){c.setAttribute(r,a)})}for(const o in t){const r=gt[o]||o.toLowerCase();r in c.attributes||s.push(i(t[o],r))}if(e.indices!==void 0&&!c.index){const o=n.getDependency("accessor",e.indices).then(function(r){c.setIndex(r)});s.push(o)}return me(c,e),Ki(c,e,n),Promise.all(s).then(function(){return e.targets!==void 0?Gi(c,e.targets,n):c})}function Zt(c,e){let n=c.getIndex();if(n===null){const o=[],r=c.getAttribute("position");if(r!==void 0){for(let a=0;a<r.count;a++)o.push(a);c.setIndex(o),n=c.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c}const t=n.count-2,s=[];if(e===ln)for(let o=1;o<=t;o++)s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));else for(let o=0;o<t;o++)o%2===0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));s.length/3!==t&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=c.clone();return i.setIndex(s),i}const Jt={type:"change"},ct={type:"start"},Qt={type:"end"};class Mn extends gs{constructor(e,n){super();n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:_e.ROTATE,MIDDLE:_e.DOLLY,RIGHT:_e.PAN},this.touches={ONE:xe.ROTATE,TWO:xe.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(p){p.addEventListener("keydown",Lt),this._domElementKeyEvents=p},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(Jt),t.update(),i=s.NONE},this.update=function(){const p=new z,C=new dt().setFromUnitVectors(e.up,new z(0,1,0)),U=C.clone().invert(),j=new z,J=new dt,Ae=2*Math.PI;return function(){const Nt=t.object.position;p.copy(Nt).sub(t.target),p.applyQuaternion(C),r.setFromVector3(p),t.autoRotate&&i===s.NONE&&L(A()),t.enableDamping?(r.theta+=a.theta*t.dampingFactor,r.phi+=a.phi*t.dampingFactor):(r.theta+=a.theta,r.phi+=a.phi);let ne=t.minAzimuthAngle,se=t.maxAzimuthAngle;return isFinite(ne)&&isFinite(se)&&(ne<-Math.PI?ne+=Ae:ne>Math.PI&&(ne-=Ae),se<-Math.PI?se+=Ae:se>Math.PI&&(se-=Ae),ne<=se?r.theta=Math.max(ne,Math.min(se,r.theta)):r.theta=r.theta>(ne+se)/2?Math.max(ne,r.theta):Math.min(se,r.theta)),r.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=l,r.radius=Math.max(t.minDistance,Math.min(t.maxDistance,r.radius)),t.enableDamping===!0?t.target.addScaledVector(d,t.dampingFactor):t.target.add(d),p.setFromSpherical(r),p.applyQuaternion(U),Nt.copy(t.target).add(p),t.object.lookAt(t.target),t.enableDamping===!0?(a.theta*=1-t.dampingFactor,a.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(a.set(0,0,0),d.set(0,0,0)),l=1,u||j.distanceToSquared(t.object.position)>o||8*(1-J.dot(t.object.quaternion))>o?(t.dispatchEvent(Jt),j.copy(t.object.position),J.copy(t.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",Rt),t.domElement.removeEventListener("pointerdown",Tt),t.domElement.removeEventListener("pointercancel",St),t.domElement.removeEventListener("wheel",Mt),t.domElement.removeEventListener("pointermove",st),t.domElement.removeEventListener("pointerup",it),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",Lt)};const t=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=s.NONE;const o=1e-6,r=new Dt,a=new Dt;let l=1;const d=new z;let u=!1;const h=new X,f=new X,w=new X,g=new X,m=new X,b=new X,x=new X,S=new X,F=new X,v=[],k={};function A(){return 2*Math.PI/60/60*t.autoRotateSpeed}function M(){return Math.pow(.95,t.zoomSpeed)}function L(p){a.theta-=p}function y(p){a.phi-=p}const T=function(){const p=new z;return function(U,j){p.setFromMatrixColumn(j,0),p.multiplyScalar(-U),d.add(p)}}(),E=function(){const p=new z;return function(U,j){t.screenSpacePanning===!0?p.setFromMatrixColumn(j,1):(p.setFromMatrixColumn(j,0),p.crossVectors(t.object.up,p)),p.multiplyScalar(U),d.add(p)}}(),_=function(){const p=new z;return function(U,j){const J=t.domElement;if(t.object.isPerspectiveCamera){const Ae=t.object.position;p.copy(Ae).sub(t.target);let Ye=p.length();Ye*=Math.tan(t.object.fov/2*Math.PI/180),T(2*U*Ye/J.clientHeight,t.object.matrix),E(2*j*Ye/J.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(T(U*(t.object.right-t.object.left)/t.object.zoom/J.clientWidth,t.object.matrix),E(j*(t.object.top-t.object.bottom)/t.object.zoom/J.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function R(p){t.object.isPerspectiveCamera?l/=p:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*p)),t.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function O(p){t.object.isPerspectiveCamera?l*=p:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/p)),t.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function N(p){h.set(p.clientX,p.clientY)}function D(p){x.set(p.clientX,p.clientY)}function Q(p){g.set(p.clientX,p.clientY)}function Z(p){f.set(p.clientX,p.clientY),w.subVectors(f,h).multiplyScalar(t.rotateSpeed);const C=t.domElement;L(2*Math.PI*w.x/C.clientHeight),y(2*Math.PI*w.y/C.clientHeight),h.copy(f),t.update()}function H(p){S.set(p.clientX,p.clientY),F.subVectors(S,x),F.y>0?R(M()):F.y<0&&O(M()),x.copy(S),t.update()}function re(p){m.set(p.clientX,p.clientY),b.subVectors(m,g).multiplyScalar(t.panSpeed),_(b.x,b.y),g.copy(m),t.update()}function le(p){p.deltaY<0?O(M()):p.deltaY>0&&R(M()),t.update()}function P(p){let C=!1;switch(p.code){case t.keys.UP:_(0,t.keyPanSpeed),C=!0;break;case t.keys.BOTTOM:_(0,-t.keyPanSpeed),C=!0;break;case t.keys.LEFT:_(t.keyPanSpeed,0),C=!0;break;case t.keys.RIGHT:_(-t.keyPanSpeed,0),C=!0;break}C&&(p.preventDefault(),t.update())}function G(){if(v.length===1)h.set(v[0].pageX,v[0].pageY);else{const p=.5*(v[0].pageX+v[1].pageX),C=.5*(v[0].pageY+v[1].pageY);h.set(p,C)}}function K(){if(v.length===1)g.set(v[0].pageX,v[0].pageY);else{const p=.5*(v[0].pageX+v[1].pageX),C=.5*(v[0].pageY+v[1].pageY);g.set(p,C)}}function $(){const p=v[0].pageX-v[1].pageX,C=v[0].pageY-v[1].pageY,U=Math.sqrt(p*p+C*C);x.set(0,U)}function Y(){t.enableZoom&&$(),t.enablePan&&K()}function he(){t.enableZoom&&$(),t.enableRotate&&G()}function pe(p){if(v.length==1)f.set(p.pageX,p.pageY);else{const U=ot(p),j=.5*(p.pageX+U.x),J=.5*(p.pageY+U.y);f.set(j,J)}w.subVectors(f,h).multiplyScalar(t.rotateSpeed);const C=t.domElement;L(2*Math.PI*w.x/C.clientHeight),y(2*Math.PI*w.y/C.clientHeight),h.copy(f)}function ee(p){if(v.length===1)m.set(p.pageX,p.pageY);else{const C=ot(p),U=.5*(p.pageX+C.x),j=.5*(p.pageY+C.y);m.set(U,j)}b.subVectors(m,g).multiplyScalar(t.panSpeed),_(b.x,b.y),g.copy(m)}function Ne(p){const C=ot(p),U=p.pageX-C.x,j=p.pageY-C.y,J=Math.sqrt(U*U+j*j);S.set(0,J),F.set(0,Math.pow(S.y/x.y,t.zoomSpeed)),R(F.y),x.copy(S)}function Pe(p){t.enableZoom&&Ne(p),t.enablePan&&ee(p)}function Ke(p){t.enableZoom&&Ne(p),t.enableRotate&&pe(p)}function Tt(p){t.enabled!==!1&&(v.length===0&&(t.domElement.setPointerCapture(p.pointerId),t.domElement.addEventListener("pointermove",st),t.domElement.addEventListener("pointerup",it)),Nn(p),p.pointerType==="touch"?Cn(p):Ln(p))}function st(p){t.enabled!==!1&&(p.pointerType==="touch"?kn(p):Rn(p))}function it(p){Ct(p),v.length===0&&(t.domElement.releasePointerCapture(p.pointerId),t.domElement.removeEventListener("pointermove",st),t.domElement.removeEventListener("pointerup",it)),t.dispatchEvent(Qt),i=s.NONE}function St(p){Ct(p)}function Ln(p){let C;switch(p.button){case 0:C=t.mouseButtons.LEFT;break;case 1:C=t.mouseButtons.MIDDLE;break;case 2:C=t.mouseButtons.RIGHT;break;default:C=-1}switch(C){case _e.DOLLY:if(t.enableZoom===!1)return;D(p),i=s.DOLLY;break;case _e.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enablePan===!1)return;Q(p),i=s.PAN}else{if(t.enableRotate===!1)return;N(p),i=s.ROTATE}break;case _e.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enableRotate===!1)return;N(p),i=s.ROTATE}else{if(t.enablePan===!1)return;Q(p),i=s.PAN}break;default:i=s.NONE}i!==s.NONE&&t.dispatchEvent(ct)}function Rn(p){if(t.enabled!==!1)switch(i){case s.ROTATE:if(t.enableRotate===!1)return;Z(p);break;case s.DOLLY:if(t.enableZoom===!1)return;H(p);break;case s.PAN:if(t.enablePan===!1)return;re(p);break}}function Mt(p){t.enabled===!1||t.enableZoom===!1||i!==s.NONE||(p.preventDefault(),t.dispatchEvent(ct),le(p),t.dispatchEvent(Qt))}function Lt(p){t.enabled===!1||t.enablePan===!1||P(p)}function Cn(p){switch(kt(p),v.length){case 1:switch(t.touches.ONE){case xe.ROTATE:if(t.enableRotate===!1)return;G(),i=s.TOUCH_ROTATE;break;case xe.PAN:if(t.enablePan===!1)return;K(),i=s.TOUCH_PAN;break;default:i=s.NONE}break;case 2:switch(t.touches.TWO){case xe.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Y(),i=s.TOUCH_DOLLY_PAN;break;case xe.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;he(),i=s.TOUCH_DOLLY_ROTATE;break;default:i=s.NONE}break;default:i=s.NONE}i!==s.NONE&&t.dispatchEvent(ct)}function kn(p){switch(kt(p),i){case s.TOUCH_ROTATE:if(t.enableRotate===!1)return;pe(p),t.update();break;case s.TOUCH_PAN:if(t.enablePan===!1)return;ee(p),t.update();break;case s.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Pe(p),t.update();break;case s.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Ke(p),t.update();break;default:i=s.NONE}}function Rt(p){t.enabled!==!1&&p.preventDefault()}function Nn(p){v.push(p)}function Ct(p){delete k[p.pointerId];for(let C=0;C<v.length;C++)if(v[C].pointerId==p.pointerId){v.splice(C,1);return}}function kt(p){let C=k[p.pointerId];C===void 0&&(C=new X,k[p.pointerId]=C),C.set(p.pageX,p.pageY)}function ot(p){const C=p.pointerId===v[0].pointerId?v[1]:v[0];return k[C.pointerId]}t.domElement.addEventListener("contextmenu",Rt),t.domElement.addEventListener("pointerdown",Tt),t.domElement.addEventListener("pointercancel",St),t.domElement.addEventListener("wheel",Mt,{passive:!1}),this.update()}}const Yi={props:{height:{type:Number,default:765},width:{type:Number,default:1360}},setup(c){const e=new de,n=new Le;let t,s,i,o,r,a,l,d,u=0,h,f,w={state:"Idle"},g=.001;const m=()=>{t=new Je,t.background=new q(14737632);let A=new yt(5e3);t.add(A);let M=c.width,L=c.height;s=new je(60,M/L,.25,1e4),s.lookAt(new z(2,0,0)),s.position.set(-4,7,-8);let y=new At(16777215,4473924);y.position.set(0,20,0),t.add(y);let T=new Ue(16777215);T.position.set(0,20,10),t.add(T);let E=new Re({color:10066329,depthWrite:!1});const _=new ae(new _t(2e3,2e3),E);_.rotation.x=-Math.PI/2,t.add(_);const R=new bs(200,40,0,0);R.material.opacity=.2,R.material.transparent=!0,t.add(R),new En().load("../../models/RobotExpressive.glb",D=>{o=D.scene,t.add(o),b(o,D.animations),S(),v()},void 0,function(D){console.error(D)}),i=new Qe({antialias:!0}),i.setPixelRatio(window.devicePixelRatio),i.setSize(M,L),i.outputEncoding=oe,i.setClearColor(12178431,1);const N=document.getElementById("model");N.appendChild(i.domElement),e.dom.style.position="absolute",N.appendChild(e.dom),v(),F()},b=(A,M)=>{const L=new Ve;L.domElement.style.position="absolute";let y=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],T=["Jump","Yes","No","Wave","Punch","ThumbsUp"];r=new cn(A),d={};for(let H=0;H<M.length;H++){let re=M[H],le=r.clipAction(re);d[re.name]=le,(T.indexOf(re.name)>=0||y.indexOf(re.name)>=4)&&(le.clampWhenFinished=!0,le.loop=ws)}let E=L.addFolder("States");E.add(w,"state").options(y).onChange(()=>{x(w.state,.5),w.state==="Walking"?(s.lookAt(t.position),h=setInterval(()=>{u>=.5?(g=-.001,A.rotation.y=Math.PI):u<0&&(A.rotation.y=0,g=.001),u+=g,A.translateZ(u)},16)):clearInterval(h)}),E.open();let R=L.addFolder("Emotes"),O=H=>{w[H]=()=>{x(H,.2),r.addEventListener("finished",N)},R.add(w,H)},N=()=>{r.removeEventListener("finished",N),x(w.state,.2)};for(let H=0;H<T.length;H++)O(T[H]);R.open();let D=A.getObjectByName("Head_2"),Q=Object.keys(D.morphTargetDictionary),Z=L.addFolder("Expressions");for(let H=0;H<Q.length;H++)Z.add(D.morphTargetInfluences,H,0,1,.01).name(Q[H]);Z.open(),l=d[w.state],l.play()},x=(A,M)=>{a=l,l=d[A],a!==l&&a.fadeOut(M),l.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(M).play()},S=()=>{let A=n.getDelta();r&&r.update(A),f.update(),v(),e.update(),requestAnimationFrame(S)},F=()=>{f=new Mn(s,i.domElement),f.enableDamping=!0,f.dampingFactor=.3,f.enableZoom=!0,f.minDistance=2,f.maxDistance=60,f.addEventListener("change",v),k()},v=()=>{i.render(t,s)},k=()=>{window.onkeydown=A=>{let{x:M,y:L,z:y}=s.position;if(A.keyCode===87&&(L+=1),A.keyCode===83&&(L-=1),A.keyCode,A.keyCode,A.keyCode===81){if(M===2||L===2||y===2)return!1;M=M>=0?M+1:M-1,L=L>=0?L+1:L-1,y=y>=0?y+1:y-1}if(A.keyCode===69){if(M===2||L===2||y===2)return!1;M=M>=0?M-1:M+1,L=L>=0?L-1:L+1,y=y>=0?y-1:y+1}s.position.set(M,L,y)}};ke(()=>{m()}),tt(()=>{document.getElementsByClassName("lil-gui")[0].remove()})}};function Xi(c,e,n,t,s,i){return W(),ue("div",null,[ze("div",{id:"model",class:"model-ca",onKeydown:e[0]||(e[0]=(...o)=>c.keyDown&&c.keyDown(...o))},null,32)])}var Wi=et(Yi,[["render",Xi],["__scopeId","data-v-c8e4511e"]]);const qi={props:{height:{type:Number,default:765},width:{type:Number,default:1360}},setup(c){let e,n,t,s,i,o,r,a;const l=[];let d,u,h,f,w,g,m,b,x=!1,S=0;const F=()=>{const P=document.getElementById("model");t=new je(45,window.innerWidth/window.innerHeight,1,1e3),t.position.set(1,2,-3),t.lookAt(0,1,0),a=new Le,e=new Je,e.background=new q(10526880),e.fog=new vs(10526880,10,50);let G=new yt(1e3);e.add(G);const K=new At(16777215,4473924);K.position.set(0,20,0),e.add(K);const $=new Ue(16777215);$.position.set(-3,10,-10),$.castShadow=!0,$.shadow.camera.top=2,$.shadow.camera.bottom=-2,$.shadow.camera.left=-2,$.shadow.camera.right=2,$.shadow.camera.near=.1,$.shadow.camera.far=40,e.add($),e.add(new ys($.shadow.camera));const Y=new ae(new _t(100,100),new Re({color:10066329,depthWrite:!1}));Y.rotation.x=-Math.PI/2,Y.receiveShadow=!0,e.add(Y),new En().load("../../models/Soldier.glb",function(Ne){i=Ne.scene,e.add(i),i.traverse(function(Ke){Ke.isMesh&&(Ke.castShadow=!0)}),o=new As(i),o.visible=!1,e.add(o),v();const Pe=Ne.animations;r=new cn(i),d=r.clipAction(Pe[0]),u=r.clipAction(Pe[3]),h=r.clipAction(Pe[1]),m=[d,u,h],y(),le()});let pe=c.width,ee=c.height;n=new Qe({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(pe,ee),n.outputEncoding=oe,n.shadowMap.enabled=!0,P.appendChild(n.domElement),s=new de,s.dom.style.position="absolute",document.getElementById("model").appendChild(s.dom)},v=()=>{const P=new Ve({width:310}),G=P.addFolder("Visibility"),K=P.addFolder("Activation/Deactivation"),$=P.addFolder("Pausing/Stepping"),Y=P.addFolder("Crossfading"),he=P.addFolder("Blend Weights"),pe=P.addFolder("General Speed");b={"show model":!0,"show skeleton":!1,"deactivate all":L,"activate all":y,"pause/continue":T,"make single step":R,"modify step size":.05,"from walk to idle":function(){O(u,d,1)},"from idle to walk":function(){O(d,u,.5)},"from walk to run":function(){O(u,h,2.5)},"from run to walk":function(){O(h,u,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":1,"modify run weight":0,"modify time scale":1},G.add(b,"show model").onChange(k),G.add(b,"show skeleton").onChange(A),K.add(b,"deactivate all"),K.add(b,"activate all"),$.add(b,"pause/continue"),$.add(b,"make single step"),$.add(b,"modify step size",.01,.1,.001),l.push(Y.add(b,"from walk to idle")),l.push(Y.add(b,"from idle to walk")),l.push(Y.add(b,"from walk to run")),l.push(Y.add(b,"from run to walk")),Y.add(b,"use default duration"),Y.add(b,"set custom duration",0,10,.01),he.add(b,"modify idle weight",0,1,.01).listen().onChange(function(ee){Z(d,ee)}),he.add(b,"modify walk weight",0,1,.01).listen().onChange(function(ee){Z(u,ee)}),he.add(b,"modify run weight",0,1,.01).listen().onChange(function(ee){Z(h,ee)}),pe.add(b,"modify time scale",0,1.5,.01).onChange(M),G.open(),K.open(),$.open(),Y.open(),he.open(),pe.open()},k=P=>{i.visible=P},A=P=>{o.visible=P},M=P=>{r.timeScale=P},L=()=>{m.forEach(function(P){P.stop()})},y=()=>{Z(d,b["modify idle weight"]),Z(u,b["modify walk weight"]),Z(h,b["modify run weight"]),m.forEach(function(P){P.play()})},T=()=>{x?(x=!1,_()):d.paused?_():E()},E=()=>{m.forEach(function(P){P.paused=!0})},_=()=>{m.forEach(function(P){P.paused=!1})},R=()=>{_(),x=!0,S=b["modify step size"]},O=(P,G,K)=>{const $=N(K);x=!1,_(),P===d?Q(P,G,$):D(P,G,$)},N=P=>b["use default duration"]?P:b["set custom duration"],D=(P,G,K)=>{r.addEventListener("loop",$);function $(Y){Y.action===P&&(r.removeEventListener("loop",$),Q(P,G,K))}},Q=(P,G,K)=>{Z(G,1),G.time=0,P.crossFadeTo(G,K,!0)},Z=(P,G)=>{P.enabled=!0,P.setEffectiveTimeScale(1),P.setEffectiveWeight(G)},H=()=>{b["modify idle weight"]=f,b["modify walk weight"]=w,b["modify run weight"]=g},re=()=>{f===1&&w===0&&g===0&&(l[0].disable(),l[1].enable(),l[2].disable(),l[3].disable()),f===0&&w===1&&g===0&&(l[0].enable(),l[1].disable(),l[2].enable(),l[3].disable()),f===0&&w===0&&g===1&&(l[0].disable(),l[1].disable(),l[2].disable(),l[3].enable())},le=()=>{requestAnimationFrame(le),f=d.getEffectiveWeight(),w=u.getEffectiveWeight(),g=h.getEffectiveWeight(),H(),re();let P=a.getDelta();x&&(P=S,S=0),r.update(P),s.update(),n.render(e,t)};ke(()=>{F()}),tt(()=>{document.getElementsByClassName("lil-gui")[0].remove()})}},Zi=c=>(mn("data-v-2010fa6e"),c=c(),gn(),c),Ji=Zi(()=>ze("div",{id:"model",class:"model-ca"},null,-1)),Qi=[Ji];function eo(c,e,n,t,s,i){return W(),ue("div",null,Qi)}var to=et(qi,[["render",eo],["__scopeId","data-v-2010fa6e"]]);const no=ye({name:"Models",props:{height:{type:Number,default:765},width:{type:Number,default:1360}},setup(c){let e,n,t,s;const i=new de;new Le;let o,r,a,l,d;const u=()=>{e=new Je;const y=c.width,T=c.height;n=new je(45,y/T,.01,1e5),n.position.set(1e3,1e3,-1e3),n.lookAt(new z);const E=new At(3355443);e.add(E);const _=new Me,R=new dn({color:10066329,map:_.load("./static/nitu.webp"),side:sn});d=new ae(new _t(2e3,2e3),R),d.name="ground",d.receiveShadow=!0,d.rotation.x=-Math.PI/2;const O=new yt(1e3);d.add(O),e.add(d),t=new Qe({antialias:!0}),t.setPixelRatio(window.devicePixelRatio),t.setSize(y,T),t.outputEncoding=oe,t.setClearColor(12178431,1),t.shadowMap.enabled=!0;const N=document.getElementById("model");N.appendChild(t.domElement),i.dom.style.position="absolute",N.appendChild(i.dom),h(),f(),w()},h=()=>{new Mn(n,t.domElement).addEventListener("change",()=>{})},f=()=>{const y=new Ve;y.domElement.style.position="absolute";let T={\u7CBE\u7075\u56FE:!1,\u5E27\u52A8\u753B:!1,\u65E5\u7167:!1,\u81EA\u65CB:!1},E=y.addFolder("\u64CD\u4F5C");E.add(T,"\u7CBE\u7075\u56FE").onChange(m),E.add(T,"\u5E27\u52A8\u753B").onChange(b),E.add(T,"\u65E5\u7167").onChange(x),E.add(T,"\u81EA\u65CB").onChange(S),E.open(),o=new F(e),r=new M(e),a=new L(d)},w=()=>{g(),requestAnimationFrame(w)},g=()=>{i.update(),t.render(e,n)},m=y=>{y?o.init():o.remove()},b=y=>{y?v():A()},x=y=>{y?r.init():r.remove()},S=y=>{y?a.start():a.remove()};function F(y){this.ground=y,this.treeGroup=null,this.init=()=>{const T=new Me().load("/static/tree.png"),E=new He;for(let _=0;_<100;_++){const R=new $t({map:T}),O=new Ht(R);O.scale.set(100,100,1);const N=Math.random()-.5,D=Math.random()-.5;O.position.set(2e3*N,50,2e3*D),E.add(O)}this.treeGroup=E,this.ground.add(this.treeGroup)},this.remove=()=>{this.ground.remove(this.treeGroup)}}const v=()=>{s=new He;const y=new Me().load("/static/rain.png");for(let T=0;T<1e3;T++){const E=new $t({map:y}),_=new Ht(E);_.scale.set(8,10,1);const R=Math.random()-.5,O=Math.abs(Math.random()-.5),N=Math.random()-.5;_.position.set(2e3*R,4e3*O,2e3*N),s.add(_)}e.add(s),k()},k=()=>{s.children.forEach(y=>{y.position.y-=1,y.position.y<0&&(y.position.y=400)}),g(),l=requestAnimationFrame(k)},A=()=>{e.remove(s),g(),cancelAnimationFrame(l)};function M(y){this.scene=y,this.directionalLight=null,this.directionalLightHelper=null,this.shadowMesh=null,this.shadowAn=null,this.clock=new Le,this.timer=0,this.init=()=>{const T=new _s(40,100,40),E=new Re({color:16777215});this.shadowMesh=new ae(T,E),this.shadowMesh.position.set(360,50,0),this.shadowMesh.castShadow=!0,this.scene.add(this.shadowMesh),this.directionalLight=new Ue(16777215,1),this.directionalLight.position.set(0,0,0),this.directionalLightHelper=new xs(this.directionalLight,10,16776960);const _=new Me,R=new Re({map:_.load("./static/sun.jpeg")});this.sun=new ae(new un(50,50,50),R),this.sun.position.set(0,0,0),this.sun.emissive=this.sun.color,this.sun.emissiveMap=this.sun.map,this.scene.add(this.sun),this.scene.add(this.directionalLightHelper),this.scene.add(this.directionalLight),this.directionalLight.castShadow=!0,this.directionalLight.shadow.camera.near=5,this.directionalLight.shadow.camera.far=5e3,this.directionalLight.shadow.camera.left=-5e3,this.directionalLight.shadow.camera.right=5e3,this.directionalLight.shadow.camera.top=5e3,this.directionalLight.shadow.camera.bottom=-5e3,this.directionalLight.shadow.mapSize.set(10240,10240),this.render()},this.render=()=>{const T=this.clock.getDelta();this.timer+=T/50;const E=1e3*Math.cos(this.timer),_=1e3*Math.sin(this.timer),R=0;this.directionalLight.position.set(E,_,R),this.sun.position.set(E,_,R),this.directionalLightHelper.update(),g(),this.shadowAn=requestAnimationFrame(this.render)},this.remove=()=>{this.scene.remove(this.sun),this.scene.remove(this.shadowMesh),this.scene.remove(this.directionalLight),this.scene.remove(this.directionalLightHelper),g(),cancelAnimationFrame(this.shadowAn)}}function L(y){this.ground=y,this.clock=new Le,this.timer=0,this.cameraAn=null,this.x=0,this.y=0,this.z=0,this.start=()=>{this.x=n.position.x,this.z=n.position.z,this.y=n.position.y,this.update()},this.update=()=>{const T=this.clock.getDelta();this.timer+=T/5;const E=this.y*Math.cos(this.timer),_=this.y*Math.sin(this.timer),R=this.y;n.position.set(E,R,_),n.lookAt(new z),g(),this.cameraAn=requestAnimationFrame(this.update),i.update()},this.remove=()=>{cancelAnimationFrame(this.cameraAn)}}ke(()=>{u()}),tt(()=>{t.forceContextLoss(),t.dispose(),t.domElement=null,e.clear(),r.remove(),document.getElementsByClassName("lil-gui")[0]&&document.getElementsByClassName("lil-gui")[0].remove()})}}),so=c=>(mn("data-v-04badae2"),c=c(),gn(),c),io=so(()=>ze("div",{id:"model",class:"model-ca"},null,-1)),oo=[io];function ao(c,e,n,t,s,i){return W(),ue("div",null,oo)}var ro=et(no,[["render",ao],["__scopeId","data-v-04badae2"]]);const lo={name:"Earth1",props:{height:{type:Number,default:765},width:{type:Number,default:1360}},setup(c){const o=new de,r=new Me,a=new z,l=new Le,d=new Qe({antialias:!0});let u=c.height,h=c.width,f,w,g,m,b,x,S,F;const v=()=>{g=new Je,g.fog=new Es(0,25e-8),f=new je(25,h/u,50,1e7),f.position.z=6371*7;const y=new Ue(16777215);y.position.set(1,0,1).normalize(),g.add(y);const T=new Re({specular:3355443,shininess:15,map:r.load("./static/planets/earth_atmos_4096.jpg"),specularMap:r.load("./static/planets/earth_specular_2048.jpg"),normalMap:r.load("./static/planets/earth_normal_2048.jpg"),normalScale:new X(.85,-.85)}),E=new un(6371,100,50);m=new ae(E,T),m.rotation.y=2.5,m.rotation.z=.41,g.add(m);const _=new dn({map:r.load("./static/planets/earth_clouds_2048.png"),transparent:!0});b=new ae(E,_),b.scale.set(1.005,1.005,1.005),b.rotation.y=2.5,b.rotation.z=.41,g.add(b);const R=new Re({map:r.load("./static/planets/moon_1024.jpg")});x=new ae(E,R),x.position.set(6371*5,0,0),x.scale.set(.23,.23,.23),g.add(x),k(),d.setPixelRatio(window.devicePixelRatio),d.setSize(h,u);const O=document.getElementById("model");O.appendChild(d.domElement),o.dom.style.position="absolute",O.appendChild(o.dom);const N=new Ts(g,f),D=new Ss(.35,.75,2048,!1);S=new Ms(d),S.addPass(N),S.addPass(D),A()},k=()=>{const T=[new ht,new ht],E=[],_=[],R=new z;for(let N=0;N<250;N++)R.x=Math.random()*2-1,R.y=Math.random()*2-1,R.z=Math.random()*2-1,R.multiplyScalar(6371),E.push(R.x,R.y,R.z);for(let N=0;N<1500;N++)R.x=Math.random()*2-1,R.y=Math.random()*2-1,R.z=Math.random()*2-1,R.multiplyScalar(6371),_.push(R.x,R.y,R.z);T[0].setAttribute("position",new Bt(E,3)),T[1].setAttribute("position",new Bt(_,3));const O=[new fe({color:5592405,size:2,sizeAttenuation:!1}),new fe({color:5592405,size:1,sizeAttenuation:!1}),new fe({color:3355443,size:2,sizeAttenuation:!1}),new fe({color:3815994,size:1,sizeAttenuation:!1}),new fe({color:1710618,size:2,sizeAttenuation:!1}),new fe({color:1710618,size:1,sizeAttenuation:!1})];for(let N=10;N<30;N++){const D=new on(T[N%2],O[N%6]);D.rotation.x=Math.random()*6,D.rotation.y=Math.random()*6,D.rotation.z=Math.random()*6,D.scale.setScalar(N*10),D.matrixAutoUpdate=!1,D.updateMatrix(),g.add(D)}},A=()=>{w=new Ls(f,d.domElement),w.movementSpeed=1,w.domElement=d.domElement,w.rollSpeed=Math.PI/24,w.autoForward=!1,w.dragToLook=!0},M=()=>{requestAnimationFrame(M),L(),o.update()},L=()=>{const y=l.getDelta();m.rotation.y+=.02*y,b.rotation.y+=1.25*.02*y;const T=f.position.length();a.subVectors(f.position,x.position);const E=a.length();E<T?F=E-6371*.23*1.01:F=T-6371*1.01,w.movementSpeed=.33*F,w.update(y),S.render(y)};ke(()=>{v(),M()}),tt(()=>{})}};function co(c,e,n,t,s,i){return W(),ue("div",null,[ze("div",{id:"model",class:"model-ca",onKeydown:e[0]||(e[0]=(...o)=>c.keyDown&&c.keyDown(...o))},null,32)])}var uo=et(lo,[["render",co],["__scopeId","data-v-3ba782d0"]]);const ho={class:"model"},Ao=ye({setup(c){Hs();const e=V("Robot"),n=V(765),t=V(1360),s=i=>{e.value=i.props.label};return(i,o)=>{const r=di,a=ci;return W(),ue("div",ho,[Ee(a,{class:"model-tabs",type:"border-card",onTabClick:s,"tab-position":"left"},{default:Te(()=>[Ee(r,{key:"robot",label:"Robot"},{default:Te(()=>[e.value==="Robot"?(W(),Ie(Wi,{key:0,height:n.value,width:t.value},null,8,["height","width"])):Se("",!0)]),_:1}),Ee(r,{key:"soldier",label:"Soldier"},{default:Te(()=>[e.value==="Soldier"?(W(),Ie(to,{key:0,height:n.value,width:t.value},null,8,["height","width"])):Se("",!0)]),_:1}),Ee(r,{key:"three7",label:"Three7"},{default:Te(()=>[e.value==="Three7"?(W(),Ie(ro,{key:0,height:n.value,width:t.value},null,8,["height","width"])):Se("",!0)]),_:1}),Ee(r,{key:"earth",label:"earth"},{default:Te(()=>[e.value==="earth"?(W(),Ie(Rs,{key:0,height:n.value,width:t.value},null,8,["height","width"])):Se("",!0)]),_:1}),Ee(r,{key:"earth1",label:"earth1"},{default:Te(()=>[e.value==="earth1"?(W(),Ie(uo,{key:0,height:n.value,width:t.value},null,8,["height","width"])):Se("",!0)]),_:1})]),_:1})])}}});export{Ao as default};
