import{d as F,A as z,D as S,B as $,F as v,a as r,G as w}from"./element-plus.9672f9b1.js";import{B as g,_ as A}from"./index.cd8757c6.js";import{a as h}from"./axios.e9656f83.js";import{d as D,Y as _,C as L,o as T,c as k,a as b,S as s,Q as p,a0 as y,U as I,b5 as M,b4 as P,q as U}from"./@vue.0176e29f.js";import"./@vueuse.ea854302.js";import"./dayjs.810e77a2.js";import"./@intlify.7d747563.js";import"./lodash-es.c5a0ee5e.js";import"./async-validator.5d25c98b.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vuex.95ee8266.js";import"./vue-router.ef7e3c46.js";import"./nprogress.1a08f112.js";import"./vue-i18n.2c7675d4.js";import"./vue.39eaecfc.js";const x=e=>h({url:`${g}/api/systemLog`,method:"GET",params:e}),N=e=>h({url:`${g}/api/systemLog`,method:"DELETE",data:e}),V=e=>h({url:`${g}/api/systemLog/deleteSelect`,method:"DELETE",data:e}),G=()=>h({url:`${g}/api/systemLog/deleteAll`,method:"DELETE"});const R=D({name:"SystemLog",setup(){const{proxy:e}=U(),n=_({list:[]}),a=_({number:1,size:10,total:0,sizes:[10,50,100,200]}),d=_({list:[]}),l=()=>{const t={number:a.number,size:a.size};x(t).then(u=>{a.total=u.data.total,n.list=u.data.list})},B=()=>{a.number=1,l()},m=()=>l(),o=t=>{N(t).then(u=>{u.status===200&&(a.number=1,r({type:"success",message:u.message}),l())})},E=()=>{G().then(t=>{t.status===200?(a.number=1,r({type:"success",message:t.message}),l()):r({type:"warning",message:t.message})})},f=()=>{const u=d.list.map(c=>c.id);V(u).then(c=>{c.status===200?(a.number=1,r({type:"success",message:c.message}),l()):r({type:"warning",message:c.message})})},C=t=>{if(t==="selected"&&d.list.length===0){r({type:"warning",message:"\u60A8\u8FD8\u672A\u9009\u62E9\u4EFB\u4F55\u4E00\u9879\uFF01"});return}w.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E9B\u6570\u636E\u4E48?","\u8B66\u544A",{confirmButtonText:e.$t("confirm"),cancelButtonText:e.$t("cancel"),type:"warning"}).then(()=>{t==="selected"?f():E()})},i=t=>{d.list=t};return L(()=>{l()}),{tableData:n,page:a,getList:l,handleSizeChange:B,handleCurrentChange:m,deleteRow:o,handleSelectionChange:i,deleteMessage:C}}}),j=e=>(M("data-v-7e9c25ae"),e=e(),P(),e),q={class:"system-log"},Q=j(()=>b("div",null," \u7CFB\u7EDF\u65E5\u5FD7 ",-1)),Y={class:"setting"},H=y("\u6279\u91CF\u5220\u9664"),J=y("\u5168\u90E8\u5220\u9664"),K={class:"pagination"};function O(e,n,a,d,l,B){const m=F,o=z,E=S,f=$,C=v;return T(),k("div",q,[Q,b("div",Y,[s(m,{type:"primary",onClick:n[0]||(n[0]=i=>e.deleteMessage("selected"))},{default:p(()=>[H]),_:1}),s(m,{type:"primary",onClick:n[1]||(n[1]=i=>e.deleteMessage("all"))},{default:p(()=>[J]),_:1})]),s(f,{data:e.tableData.list,stripe:"","max-height":"684",onSelectionChange:e.handleSelectionChange},{default:p(()=>[s(o,{type:"selection",width:"55"}),s(o,{prop:"createBy",label:"\u521B\u5EFA\u8005",width:"180"}),s(o,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"180"}),s(o,{prop:"ip",label:"IP\u5730\u5740",width:"100"}),s(o,{prop:"logType",label:"\u65E5\u5FD7\u7C7B\u578B",width:"100"}),s(o,{prop:"logContent",label:"\u65E5\u5FD7\u5185\u5BB9"}),s(o,{label:"\u64CD\u4F5C",width:"100"},{default:p(i=>[s(E,{title:"\u786E\u5B9A\u5220\u9664\u5417?","confirm-button-text":e.$t("confirm"),"cancel-button-text":e.$t("cancel"),onConfirm:t=>e.deleteRow(i.row.id)},{reference:p(()=>[s(m,{link:"",type:"primary"},{default:p(()=>[y(I(e.$t("delete")),1)]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"]),b("div",K,[s(C,{align:"right",currentPage:e.page.number,"onUpdate:currentPage":n[2]||(n[2]=i=>e.page.number=i),"page-size":e.page.size,"onUpdate:page-size":n[3]||(n[3]=i=>e.page.size=i),"page-sizes":e.page.sizes,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.page.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])])}var he=A(R,[["render",O],["__scopeId","data-v-7e9c25ae"]]);export{he as default};
